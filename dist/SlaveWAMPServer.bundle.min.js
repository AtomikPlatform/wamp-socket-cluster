!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wampSocketCluster",[],e):"object"==typeof exports?exports.wampSocketCluster=e():t.wampSocketCluster=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,r){"use strict";function n(t,e){return e+": "+t.toString()+"\n"}function o(t,e,r,n){"object"===(void 0===r?"undefined":c(r))?e[n]=s(t[n],r):t.indexOf(r)===-1&&e.push(r)}function i(t,e,r){e[r]=t[r]}function a(t,e,r,n){"object"===c(e[n])&&e[n]&&t[n]?r[n]=s(t[n],e[n]):r[n]=e[n]}function s(t,e){var r=Array.isArray(e),n=r&&[]||{};return r?(t=t||[],n=n.concat(t),e.forEach(o.bind(null,t,n))):(t&&"object"===(void 0===t?"undefined":c(t))&&Object.keys(t).forEach(i.bind(null,t,n)),Object.keys(e).forEach(a.bind(null,t,e,n))),n}function u(t){return"/"+encodeURIComponent(t).replace(/~/g,"%7E")}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=r(3),l=e.ValidationError=function(t,e,r,n,o,i){n&&(this.property=n),t&&(this.message=t),r&&(r.id?this.schema=r.id:this.schema=r),e&&(this.instance=e),this.name=o,this.argument=i,this.stack=this.toString()};l.prototype.toString=function(){return this.property+" "+this.message};var h=e.ValidatorResult=function(t,e,r,n){this.instance=t,this.schema=e,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&r.disableFormat===!0};h.prototype.addError=function(t){var e;if("string"==typeof t)e=new l(t,this.instance,this.schema,this.propertyPath);else{if(!t)throw new Error("Missing error detail");if(!t.message)throw new Error("Missing error message");if(!t.name)throw new Error("Missing validator type");e=new l(t.message,this.instance,this.schema,this.propertyPath,t.name,t.argument)}if(this.throwError)throw e;return this.errors.push(e),e},h.prototype.importErrors=function(t){"string"==typeof t||t&&t.validatorType?this.addError(t):t&&t.errors&&Array.prototype.push.apply(this.errors,t.errors)},h.prototype.toString=function(t){return this.errors.map(n).join("")},Object.defineProperty(h.prototype,"valid",{get:function(){return!this.errors.length}});var p=e.SchemaError=function t(e,r){this.message=e,this.schema=r,Error.call(this,e),Error.captureStackTrace(this,t)};p.prototype=Object.create(Error.prototype,{constructor:{value:p,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var d=e.SchemaContext=function(t,e,r,n,o){this.schema=t,this.options=e,this.propertyPath=r,this.base=n,this.schemas=o};d.prototype.resolve=function(t){return f.resolve(this.base,t)},d.prototype.makeChild=function(t,e){var r=void 0===e?this.propertyPath:this.propertyPath+y(e),n=f.resolve(this.base,t.id||""),o=new d(t,this.options,r,n,Object.create(this.schemas));return t.id&&!o.schemas[n]&&(o.schemas[n]=t),o};var m=e.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(t){return"string"==typeof t&&parseFloat(t)===parseInt(t,10)&&!isNaN(t)},regex:function(t){var e=!0;try{new RegExp(t)}catch(t){e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};m.regexp=m.regex,m.pattern=m.regex,m.ipv4=m["ip-address"],e.isFormat=function(t,e,r){if("string"==typeof t&&void 0!==m[e]){if(m[e]instanceof RegExp)return m[e].test(t);if("function"==typeof m[e])return m[e](t)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[e])return r.customFormats[e](t);return!0};var y=e.makeSuffix=function(t){return t=t.toString(),t.match(/[.\s\[\]]/)||t.match(/^[\d]/)?t.match(/^\d+$/)?"["+t+"]":"["+JSON.stringify(t)+"]":"."+t};e.deepCompareStrict=function t(e,r){if((void 0===e?"undefined":c(e))!==(void 0===r?"undefined":c(r)))return!1;if(e instanceof Array)return r instanceof Array&&(e.length===r.length&&e.every(function(n,o){return t(e[o],r[o])}));if("object"===(void 0===e?"undefined":c(e))){if(!e||!r)return e===r;var n=Object.keys(e),o=Object.keys(r);return n.length===o.length&&n.every(function(n){return t(e[n],r[n])})}return e===r},t.exports.deepMerge=s,e.objectGetPath=function(t,e){for(var r,n=e.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in t))return;t=t[o]}return t},e.encodePath=function(t){return t.map(u).join("")}},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o,i,a=r(5).Validator,s=new a,u={id:"/WAMPResponse",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"string"},success:{type:"boolean"},type:{type:"string"}},required:["type","procedure","signature","success","error"]},c={id:"/WAMPRequest",type:"object",properties:{data:{},signature:{type:"string"},procedure:{type:"string"},type:{type:"string"}},required:["type","procedure"]},f={id:"/EventRequestSchema",type:"object",properties:{data:{},procedure:{type:"string"},type:{type:"string"}},required:["type","procedure"]},l={id:"/MasterWAMPResponse",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},success:{type:"boolean"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure","success"]},h={id:"/MasterWAMPRequest",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","type","procedure"]},p={id:"/InterProcessRPCResponseSchema",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},success:{type:"boolean"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure","success"]},d={id:"/InterProcessRPCRequestSchema",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"string"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure"]},m={id:"/MasterConfigResponseSchema",type:"object",properties:{registeredEvents:{type:"array"},config:{type:"object"},type:{type:"string"}},required:["type"]},y={id:"/MasterConfigRequestSchema",type:"object",properties:{type:{type:"string"}},required:["type"]},v=(o={},n(o,u.id,c.id),n(o,l.id,c.id),n(o,p.id,d.id),n(o,m.id,y.id),o),b=(i={},n(i,c.id,u.id),n(i,h.id,u.id),n(i,d.id,p.id),n(i,y.id,m.id),i),g=function(t,e){return s.validate(t,e).valid&&t.type===e.id};t.exports={WAMPRequestSchema:c,WAMPResponseSchema:u,InterProcessRPCRequestSchema:d,InterProcessRPCResponseSchema:p,MasterWAMPResponseSchema:l,MasterWAMPRequestSchema:h,MasterConfigRequestSchema:y,MasterConfigResponseSchema:m,EventRequestSchema:f,resToReqMap:v,reqToResMap:b,isValid:g}},function(t,e,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&f.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function i(t){return f.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=r(10),f=r(14);e.parse=o,e.resolve=a,e.resolveObject=s,e.format=i,e.Url=n;var l=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(m),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],g={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=r(13);n.prototype.parse=function(t,e,r){if(!f.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":u(t)));var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/"),t=i.join(o);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var s=p.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?S.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=l.exec(a);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,a=a.substr(h.length)}if(r||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||h&&_[h]||(a=a.substr(2),this.slashes=!0)}if(!_[h]&&(m||h&&!w[h])){for(var j=-1,A=0;A<b.length;A++){var O=a.indexOf(b[A]);O!==-1&&(j===-1||O<j)&&(j=O)}var x,E;E=j===-1?a.lastIndexOf("@"):a.lastIndexOf("@",j),E!==-1&&(x=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(x)),j=-1;for(var A=0;A<v.length;A++){var O=a.indexOf(v[A]);O!==-1&&(j===-1||O<j)&&(j=O)}j===-1&&(j=a.length),this.host=a.slice(0,j),a=a.slice(j),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var k=this.hostname.split(/\./),A=0,R=k.length;A<R;A++){var C=k[A];if(C&&!C.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var I="",q=0,M=C.length;q<M;q++)C.charCodeAt(q)>127?I+="x":I+=C[q];if(!I.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var $=k.slice(0,A),F=k.slice(A+1),z=C.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);z&&($.push(z[1]),F.unshift(z[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=c.toASCII(this.hostname));var T=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+T,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!g[d])for(var A=0,R=y.length;A<R;A++){var L=y[A];if(a.indexOf(L)!==-1){var N=encodeURIComponent(L);N===L&&(N=escape(L)),a=a.split(L).join(N)}}var Z=a.indexOf("#");Z!==-1&&(this.hash=a.substr(Z),a=a.slice(0,Z));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),e&&(this.query=S.parse(this.query)),a=a.slice(0,U)):e&&(this.search="",this.query={}),a&&(this.pathname=a),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var T=this.pathname||"",V=this.search||"";this.path=T+V}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(f.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(r[c]=t[c])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var p=l[h];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||_[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=b||v||r.host&&t.pathname,S=g,j=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],A=r.protocol&&!w[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(""===j[0]?j[0]=r.host:j.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),g=g&&(""===d[0]||""===j[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,j=d;else if(d.length)j||(j=[]),j.pop(),j=j.concat(d),r.search=t.search,r.query=t.query;else if(!f.isNullOrUndefined(t.search)){if(A){r.hostname=r.host=j.shift();var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return r.search=t.search,r.query=t.query,f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!j.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=j.slice(-1)[0],E=(r.host||t.host||j.length>1)&&("."===x||".."===x)||""===x,P=0,k=j.length;k>=0;k--)x=j[k],"."===x?j.splice(k,1):".."===x?(j.splice(k,1),P++):P&&(j.splice(k,1),P--);if(!g&&!S)for(;P--;P)j.unshift("..");!g||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),E&&"/"!==j.join("/").substr(-1)&&j.push("");var R=""===j[0]||j[0]&&"/"===j[0].charAt(0);if(A){r.hostname=r.host=R?"":j.length?j.shift():"";var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return g=g||r.host&&j.length,g&&!R&&j.unshift(""),j.length?r.pathname=j.join("/"):(r.pathname=null,r.path=null),f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,r){"use strict";var n=t.exports.Validator=r(9);t.exports.ValidatorResult=r(0).ValidatorResult,t.exports.ValidationError=r(0).ValidationError,t.exports.SchemaError=r(0).SchemaError,t.exports.validate=function(t,e,r){return(new n).validate(t,e,r)}},function(t,e,r){"use strict";(function(e){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function i(){this.__data__=dt?dt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(dt){var r=e[t];return r===V?void 0:r}return ut.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return dt?void 0!==e[t]:ut.call(e,t)}function c(t,e){return this.__data__[t]=dt&&void 0===e?V:e,this}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function l(){this.__data__=[]}function h(t){var e=this.__data__,r=S(e,t);return!(r<0)&&(r==e.length-1?e.pop():ht.call(e,r,1),!0)}function p(t){var e=this.__data__,r=S(e,t);return r<0?void 0:e[r][1]}function d(t){return S(this.__data__,t)>-1}function m(t,e){var r=this.__data__,n=S(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function y(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(pt||f),string:new o}}function b(t){return E(this,t).delete(t)}function g(t){return E(this,t).get(t)}function _(t){return E(this,t).has(t)}function w(t,e){return E(this,t).set(t,e),this}function S(t,e){for(var r=t.length;r--;)if($(t[r][0],e))return r;return-1}function j(t,e){e=k(e,t)?[e]:x(e);for(var r=0,n=e.length;null!=t&&r<n;)t=t[I(e[r++])];return r&&r==n?t:void 0}function A(t){return!(!z(t)||C(t))&&(F(t)||n(t)?ft:Q).test(q(t))}function O(t){if("string"==typeof t)return t;if(W(t))return yt?yt.call(t):"";var e=t+"";return"0"==e&&1/t==-J?"-0":e}function x(t){return bt(t)?t:vt(t)}function E(t,e){var r=t.__data__;return R(e)?r["string"==typeof e?"string":"hash"]:r.map}function P(t,e){var n=r(t,e);return A(n)?n:void 0}function k(t,e){if(bt(t))return!1;var r=void 0===t?"undefined":Z(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!W(t))||(H.test(t)||!X.test(t)||null!=e&&t in Object(e))}function R(t){var e=void 0===t?"undefined":Z(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function C(t){return!!at&&at in t}function I(t){if("string"==typeof t||W(t))return t;var e=t+"";return"0"==e&&1/t==-J?"-0":e}function q(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function M(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(U);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(M.Cache||y),r}function $(t,e){return t===e||t!==t&&e!==e}function F(t){var e=z(t)?ct.call(t):"";return e==B||e==D}function z(t){var e=void 0===t?"undefined":Z(t);return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==(void 0===t?"undefined":Z(t))}function W(t){return"symbol"==(void 0===t?"undefined":Z(t))||T(t)&&ct.call(t)==G}function L(t){return null==t?"":O(t)}function N(t,e,r){var n=null==t?void 0:j(t,e);return void 0===n?r:n}var Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U="Expected a function",V="__lodash_hash_undefined__",J=1/0,B="[object Function]",D="[object GeneratorFunction]",G="[object Symbol]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,K=/^\./,Q=/^\[object .+?Constructor\]$/,Y="object"==(void 0===e?"undefined":Z(e))&&e&&e.Object===Object&&e,tt="object"==("undefined"==typeof self?"undefined":Z(self))&&self&&self.Object===Object&&self,et=Y||tt||Function("return this")(),rt=Array.prototype,nt=Function.prototype,ot=Object.prototype,it=et["__core-js_shared__"],at=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),st=nt.toString,ut=ot.hasOwnProperty,ct=ot.toString,ft=RegExp("^"+st.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=et.Symbol,ht=rt.splice,pt=P(et,"Map"),dt=P(Object,"create"),mt=lt?lt.prototype:void 0,yt=mt?mt.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=l,f.prototype.delete=h,f.prototype.get=p,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=_,y.prototype.set=w;var vt=M(function(t){t=L(t);var e=[];return K.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,r,n,o){e.push(n?o.replace(/\\(\\)?/g,"$1"):r||t)}),e});M.Cache=y;var bt=Array.isArray;t.exports=N}).call(e,r(2))},function(t,e,r){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";function n(t,e,r,n,o){var i=this.validateSchema(t,o,e,r);return!i.valid&&n instanceof Function&&n(i),i.valid}function o(t,e,r,n,o,i){if(!e.properties||void 0===e.properties[o])if(e.additionalProperties===!1)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var a=e.additionalProperties||{},s=this.validateSchema(t[o],a,r,n.makeChild(a,o));s.instance!==i.instance[o]&&(i.instance[o]=s.instance),i.importErrors(s)}}function i(t,e,r){var n,o=r.length;for(n=e+1,o;n<o;n++)if(s.deepCompareStrict(t,r[n]))return!1;return!0}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(0),u=s.ValidatorResult,c=s.SchemaError,f={};f.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var l=f.validators={};l.type=function(t,e,r,n){if(void 0===t)return null;var o=new u(t,e,r,n),i=Array.isArray(e.type)?e.type:[e.type];if(!i.some(this.testType.bind(this,t,e,r,n))){var a=i.map(function(t){return t.id&&"<"+t.id+">"||t+""});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o},l.anyOf=function(t,e,r,o){if(void 0===t)return null;var i=new u(t,e,r,o),a=new u(t,e,r,o);if(!Array.isArray(e.anyOf))throw new c("anyOf must be an array");if(!e.anyOf.some(n.bind(this,t,r,o,function(t){a.importErrors(t)}))){var s=e.anyOf.map(function(t,e){return t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+e+"]"});r.nestedErrors&&i.importErrors(a),i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},l.allOf=function(t,e,r,n){if(void 0===t)return null;if(!Array.isArray(e.allOf))throw new c("allOf must be an array");var o=new u(t,e,r,n),i=this;return e.allOf.forEach(function(e,a){var s=i.validateSchema(t,e,r,n);if(!s.valid){var u=e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+a+"]";o.addError({name:"allOf",argument:{id:u,length:s.errors.length,valid:s},message:"does not match allOf schema "+u+" with "+s.errors.length+" error[s]:"}),o.importErrors(s)}}),o},l.oneOf=function(t,e,r,o){if(void 0===t)return null;if(!Array.isArray(e.oneOf))throw new c("oneOf must be an array");var i=new u(t,e,r,o),a=new u(t,e,r,o),s=e.oneOf.filter(n.bind(this,t,r,o,function(t){a.importErrors(t)})).length,f=e.oneOf.map(function(t,e){return t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+e+"]"});return 1!==s&&(r.nestedErrors&&i.importErrors(a),i.addError({name:"oneOf",argument:f,message:"is not exactly one from "+f.join(",")})),i},l.properties=function(t,e,r,n){if(void 0!==t&&t instanceof Object){var o=new u(t,e,r,n),i=e.properties||{};for(var a in i){var s=(t||void 0)&&t[a],c=this.validateSchema(s,i[a],r,n.makeChild(i[a],a));c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c)}return o}},l.patternProperties=function(t,e,r,n){if(void 0!==t&&this.types.object(t)){var i=new u(t,e,r,n),a=e.patternProperties||{};for(var s in t){var c=!0;for(var f in a){if(new RegExp(f).test(s)){c=!1;var l=this.validateSchema(t[s],a[f],r,n.makeChild(a[f],s));l.instance!==i.instance[s]&&(i.instance[s]=l.instance),i.importErrors(l)}}c&&o.call(this,t,e,r,n,s,i)}return i}},l.additionalProperties=function(t,e,r,n){if(void 0!==t&&this.types.object(t)){if(e.patternProperties)return null;var i=new u(t,e,r,n);for(var a in t)o.call(this,t,e,r,n,a,i);return i}},l.minProperties=function(t,e,r,n){if(!t||"object"!==(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);return Object.keys(t).length>=e.minProperties||o.addError({name:"minProperties",argument:e.minProperties,message:"does not meet minimum property length of "+e.minProperties}),o},l.maxProperties=function(t,e,r,n){if(!t||"object"!==(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);return Object.keys(t).length<=e.maxProperties||o.addError({name:"maxProperties",argument:e.maxProperties,message:"does not meet maximum property length of "+e.maxProperties}),o},l.items=function(t,e,r,n){if(!Array.isArray(t))return null;var o=this,i=new u(t,e,r,n);return void 0!==t&&e.items?(t.every(function(t,a){var s=Array.isArray(e.items)?e.items[a]||e.additionalItems:e.items;if(void 0===s)return!0;if(s===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(t,s,r,n.makeChild(s,a));return u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u),!0}),i):i},l.minimum=function(t,e,r,n){if("number"!=typeof t)return null;var o=new u(t,e,r,n),i=!0;return i=e.exclusiveMinimum&&e.exclusiveMinimum===!0?t>e.minimum:t>=e.minimum,i||o.addError({name:"minimum",argument:e.minimum,message:"must have a minimum value of "+e.minimum}),o},l.maximum=function(t,e,r,n){if("number"!=typeof t)return null;var o,i=new u(t,e,r,n);return o=e.exclusiveMaximum&&e.exclusiveMaximum===!0?t<e.maximum:t<=e.maximum,o||i.addError({name:"maximum",argument:e.maximum,message:"must have a maximum value of "+e.maximum}),i},l.divisibleBy=function(t,e,r,n){if("number"!=typeof t)return null;if(0==e.divisibleBy)throw new c("divisibleBy cannot be zero");var o=new u(t,e,r,n);return t/e.divisibleBy%1&&o.addError({name:"divisibleBy",argument:e.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(e.divisibleBy)}),o},l.multipleOf=function(t,e,r,n){if("number"!=typeof t)return null;if(0==e.multipleOf)throw new c("multipleOf cannot be zero");var o=new u(t,e,r,n);return t/e.multipleOf%1&&o.addError({name:"multipleOf",argument:e.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(e.multipleOf)}),o},l.required=function(t,e,r,n){var o=new u(t,e,r,n);return void 0===t&&e.required===!0?o.addError({name:"required",message:"is required"}):t&&"object"===(void 0===t?"undefined":a(t))&&Array.isArray(e.required)&&e.required.forEach(function(e){void 0===t[e]&&o.addError({name:"required",argument:e,message:"requires property "+JSON.stringify(e)})}),o},l.pattern=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.match(e.pattern)||o.addError({name:"pattern",argument:e.pattern,message:"does not match pattern "+JSON.stringify(e.pattern)}),o},l.format=function(t,e,r,n){var o=new u(t,e,r,n);return o.disableFormat||s.isFormat(t,e.format,this)||o.addError({name:"format",argument:e.format,message:"does not conform to the "+JSON.stringify(e.format)+" format"}),o},l.minLength=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.length>=e.minLength||o.addError({name:"minLength",argument:e.minLength,message:"does not meet minimum length of "+e.minLength}),o},l.maxLength=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.length<=e.maxLength||o.addError({name:"maxLength",argument:e.maxLength,message:"does not meet maximum length of "+e.maxLength}),o},l.minItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.length>=e.minItems||o.addError({name:"minItems",argument:e.minItems,message:"does not meet minimum length of "+e.minItems}),o},l.maxItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.length<=e.maxItems||o.addError({name:"maxItems",argument:e.maxItems,message:"does not meet maximum length of "+e.maxItems}),o},l.uniqueItems=function(t,e,r,n){function o(t,e,r){for(var n=e+1;n<r.length;n++)if(s.deepCompareStrict(t,r[n]))return!1;return!0}var i=new u(t,e,r,n);return Array.isArray(t)?(t.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},l.uniqueItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},l.dependencies=function(t,e,r,n){if(!t||"object"!=(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);for(var i in e.dependencies)if(void 0!==t[i]){var s=e.dependencies[i],c=n.makeChild(s,i);if("string"==typeof s&&(s=[s]),Array.isArray(s))s.forEach(function(e){void 0===t[e]&&o.addError({name:"dependencies",argument:c.propertyPath,message:"property "+e+" not found, required by "+c.propertyPath})});else{var f=this.validateSchema(t,s,r,c);o.instance!==f.instance&&(o.instance=f.instance),f&&f.errors.length&&(o.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),o.importErrors(f))}}return o},l.enum=function(t,e,r,n){if(!Array.isArray(e.enum))throw new c("enum expects an array",e);if(void 0===t)return null;var o=new u(t,e,r,n);return e.enum.some(s.deepCompareStrict.bind(null,t))||o.addError({name:"enum",argument:e.enum,message:"is not one of enum values: "+e.enum.join(",")}),o},l.not=l.disallow=function(t,e,r,n){var o=this;if(void 0===t)return null;var i=new u(t,e,r,n),a=e.not||e.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(a){if(o.testType(t,e,r,n,a)){var s=a&&a.id&&"<"+a.id+">"||a;i.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),i):null},t.exports=f},function(t,e,r){"use strict";function n(t){var e="string"==typeof t?t:t.$ref;return"string"==typeof e&&e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(3),a=r(8),s=r(0),u=s.ValidatorResult,c=s.SchemaError,f=s.SchemaContext,l=function t(){this.customFormats=Object.create(t.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(a.validators)};l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(t,e){if(!t)return null;var r=e||t.id;return this.addSubSchema(r,t),r&&(this.schemas[r]=t),this.schemas[r]},l.prototype.addSubSchema=function(t,e){if(e&&"object"==(void 0===e?"undefined":o(e))){if(e.$ref){var r=i.resolve(t,e.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var n=e.id&&i.resolve(t,e.id),a=n||t;if(n){if(this.schemas[n]){if(!s.deepCompareStrict(this.schemas[n],e))throw new Error("Schema <"+e+"> already exists with different definition");return this.schemas[n]}this.schemas[n]=e;var u=n.replace(/^([^#]*)#$/,"$1");this.schemas[u]=e}return this.addSubSchemaArray(a,e.items instanceof Array?e.items:[e.items]),this.addSubSchemaArray(a,e.extends instanceof Array?e.extends:[e.extends]),this.addSubSchema(a,e.additionalItems),this.addSubSchemaObject(a,e.properties),this.addSubSchema(a,e.additionalProperties),this.addSubSchemaObject(a,e.definitions),this.addSubSchemaObject(a,e.patternProperties),this.addSubSchemaObject(a,e.dependencies),this.addSubSchemaArray(a,e.disallow),this.addSubSchemaArray(a,e.allOf),this.addSubSchemaArray(a,e.anyOf),this.addSubSchemaArray(a,e.oneOf),this.addSubSchema(a,e.not),this.schemas[n]}},l.prototype.addSubSchemaArray=function(t,e){if(e instanceof Array)for(var r=0;r<e.length;r++)this.addSubSchema(t,e[r])},l.prototype.addSubSchemaObject=function(t,e){if(e&&"object"==(void 0===e?"undefined":o(e)))for(var r in e)this.addSubSchema(t,e[r])},l.prototype.setSchemas=function(t){this.schemas=t},l.prototype.getSchema=function(t){return this.schemas[t]},l.prototype.validate=function(t,e,r,n){r||(r={});var o=r.propertyName||"instance",a=i.resolve(r.base||"/",e.id||"");if(n||(n=new f(e,r,o,a,Object.create(this.schemas)),n.schemas[a]||(n.schemas[a]=e)),e){var s=this.validateSchema(t,e,r,n);if(!s)throw new Error("Result undefined");return s}throw new c("no schema specified",e)},l.prototype.validateSchema=function(t,e,r,o){var i=new u(t,e,r,o);if(!e)throw new Error("schema is undefined");if(e.extends)if(e.extends instanceof Array){var l={schema:e,ctx:o};e.extends.forEach(this.schemaTraverser.bind(this,l)),e=l.schema,l.schema=null,l.ctx=null,l=null}else e=s.deepMerge(e,this.superResolve(e.extends,o));var h;if(h=n(e)){var p=this.resolve(e,h,o),d=new f(p.subschema,r,o.propertyPath,p.switchSchema,o.schemas);return this.validateSchema(t,p.subschema,r,d)}var m=r&&r.skipAttributes||[];for(var y in e)if(!a.ignoreProperties[y]&&m.indexOf(y)<0){var v=null,b=this.attributes[y];if(b)v=b.call(this,t,e,r,o);else if(r.allowUnknownAttributes===!1)throw new c("Unsupported attribute: "+y,e);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var g=r.rewrite.call(this,t,e,r,o);i.instance=g}return i},l.prototype.schemaTraverser=function(t,e){t.schema=s.deepMerge(t.schema,this.superResolve(e,t.ctx))},l.prototype.superResolve=function(t,e){var r;return(r=n(t))?this.resolve(t,r,e).subschema:t},l.prototype.resolve=function(t,e,r){if(e=r.resolve(e),r.schemas[e])return{subschema:r.schemas[e],switchSchema:e};var n=i.parse(e),o=n&&n.hash,a=o&&o.length&&e.substr(0,e.length-o.length);if(!a||!r.schemas[a])throw new c("no such schema <"+e+">",t);var u=s.objectGetPath(r.schemas[a],o.substr(1));if(void 0===u)throw new c("no such schema "+o+" located in <"+a+">",t);return{subschema:u,switchSchema:e}},l.prototype.testType=function(t,e,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,t);if(i&&"object"==(void 0===i?"undefined":o(i))){var a=this.validateSchema(t,i,r,n);return void 0===a||!(a&&a.errors.length)}return!0};var h=l.prototype.types={};h.string=function(t){return"string"==typeof t},h.number=function(t){return"number"==typeof t&&isFinite(t)},h.integer=function(t){return"number"==typeof t&&t%1==0},h.boolean=function(t){return"boolean"==typeof t},h.array=function(t){return t instanceof Array},h.null=function(t){return null===t},h.date=function(t){return t instanceof Date},h.any=function(t){return!0},h.object=function(t){return t&&"object"===(void 0===t?"undefined":o(t))&&!(t instanceof Array)&&!(t instanceof Date)},t.exports=l},function(t,e,r){"use strict";(function(t,n){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){function s(t){throw new RangeError(F[t])}function u(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function c(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace($,"."),n+u(t.split("."),e).join(".")}function f(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function l(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=W(t>>>10&1023|55296),t=56320|1023&t),e+=W(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:O}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,r){var n=0;for(t=r?T(t/k):t>>1,t+=T(t/e);t>z*E>>1;n+=O)t=T(t/z);return T(n+(z+1)*t/(t+P))}function m(t){var e,r,n,o,i,a,u,c,f,p,m=[],y=t.length,v=0,b=C,g=R;for(r=t.lastIndexOf(I),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,a=1,u=O;o>=y&&s("invalid-input"),c=h(t.charCodeAt(o++)),(c>=O||c>T((A-v)/a))&&s("overflow"),v+=c*a,f=u<=g?x:u>=g+E?E:u-g,!(c<f);u+=O)p=O-f,a>T(A/p)&&s("overflow"),a*=p;e=m.length+1,g=d(v-i,e,0==i),T(v/e)>A-b&&s("overflow"),b+=T(v/e),v%=e,m.splice(v++,0,b)}return l(m)}function y(t){var e,r,n,o,i,a,u,c,l,h,m,y,v,b,g,_=[];for(t=f(t),y=t.length,e=C,r=0,i=R,a=0;a<y;++a)(m=t[a])<128&&_.push(W(m));for(n=o=_.length,o&&_.push(I);n<y;){for(u=A,a=0;a<y;++a)(m=t[a])>=e&&m<u&&(u=m);for(v=n+1,u-e>T((A-r)/v)&&s("overflow"),r+=(u-e)*v,e=u,a=0;a<y;++a)if(m=t[a],m<e&&++r>A&&s("overflow"),m==e){for(c=r,l=O;h=l<=i?x:l>=i+E?E:l-i,!(c<h);l+=O)g=c-h,b=O-h,_.push(W(p(h+g%b,0))),c=T(g/b);_.push(W(p(c,0))),i=d(r,v,n==o),r=0,++n}++r,++e}return _.join("")}function v(t){return c(t,function(t){return q.test(t)?m(t.slice(4).toLowerCase()):t})}function b(t){return c(t,function(t){return M.test(t)?"xn--"+y(t):t})}var g="object"==i(e)&&e&&!e.nodeType&&e,_="object"==i(t)&&t&&!t.nodeType&&t,w="object"==(void 0===n?"undefined":i(n))&&n;w.global!==w&&w.window!==w&&w.self!==w||(a=w);var S,j,A=2147483647,O=36,x=1,E=26,P=38,k=700,R=72,C=128,I="-",q=/^xn--/,M=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=O-x,T=Math.floor,W=String.fromCharCode;if(S={version:"1.4.1",ucs2:{decode:f,encode:l},decode:m,encode:y,toASCII:b,toUnicode:v},"object"==i(r(4))&&r(4))void 0!==(o=function(){return S}.call(e,r,e,t))&&(t.exports=o);else if(g&&_)if(t.exports==g)_.exports=S;else for(j in S)S.hasOwnProperty(j)&&(g[j]=S[j]);else a.punycode=S}(void 0)}).call(e,r(7)(t),r(2))},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var f,l,h,p,d=t[c].replace(/\+/g,"%20"),m=d.indexOf(r);m>=0?(f=d.substr(0,m),l=d.substr(m+1)):(f=d,l=""),h=decodeURIComponent(f),p=decodeURIComponent(l),n(a,h)?o(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){switch(void 0===t?"undefined":o(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,u){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":o(t))?n(s(t),function(o){var s=encodeURIComponent(i(o))+r;return a(t[o])?n(t[o],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[o]))}).join(e):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";e.decode=e.parse=r(11),e.encode=e.stringify=r(12)},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(1),a=function(){function t(){n(this,t),this.endpoints={rpc:{},event:{}}}return o(t,[{key:"upgradeToWAMP",value:function(t){var e=this;return t.on("raw",function(r){try{r=JSON.parse(r)}catch(t){return}i.isValid(r,i.WAMPRequestSchema)&&e.processWAMPRequest(r,t)}),Object.keys(this.endpoints.event).forEach(function(r){t.on(r,function(n){e.processWAMPRequest({type:i.EventRequestSchema.id,procedure:r,data:n},t)})}),t}},{key:"processWAMPRequest",value:function(t,e){return this.endpoints.rpc[t.procedure]&&"function"==typeof this.endpoints.rpc[t.procedure]?this.endpoints.rpc[t.procedure](t.data,this.reply.bind(this,e,t)):this.endpoints.event[t.procedure]&&"function"==typeof this.endpoints.event[t.procedure]?this.endpoints.event[t.procedure](t.data):this.reply(e,t,"procedure "+t.procedure+" not registered on WAMPServer: "+JSON.stringify(Object.keys(this.endpoints.rpc)),null)}},{key:"reply",value:function(t,e,r,n){var o=this.createResponsePayload(e,r,n);t.send(JSON.stringify(o))}},{key:"createResponsePayload",value:function(t,e,r){return Object.assign({},t,{success:!e,data:r,error:e,type:i.reqToResMap[t.type]})}},{key:"registerRPCEndpoints",value:function(t){this.endpoints.rpc=Object.assign(this.endpoints.rpc,t)}},{key:"registerEventEndpoints",value:function(t){this.endpoints.event=Object.assign(this.endpoints.event,t)}},{key:"reassignRPCEndpoints",value:function(t){this.endpoints.rpc=t}},{key:"reassignEventEndpoints",value:function(t){this.endpoints.event=t}}]),t}();t.exports=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(6),a=r(1),s=function(){function t(){n(this,t),this.callsResolvers={}}return o(t,null,[{key:"generateSignature",value:function(t){return(new Date).getTime()+"_"+(Object.keys(t).length-1+1)}},{key:"MAX_CALLS_ALLOWED",get:function(){return 100}}]),o(t,[{key:"upgradeToWAMP",value:function(e){var r=this;return e.wampSend&&e.listeners("raw").length?e:(e.on("raw",function(t){if(a.isValid(t,a.WAMPResponseSchema)){var e=i(r.callsResolvers,t.procedure+"."+t.signature);if(!e)throw new Error("Unable to find resolving function for procedure "+t.procedure+" with signature "+t.signature);t.success?e.success(t.data):e.fail(t.error),delete r.callsResolvers[t.procedure][t.signature]}}),e.wampSend=function(n,o){return new Promise(function(i,s){if(r.callsResolvers[n]||(r.callsResolvers[n]={}),Object.keys(r.callsResolvers[n]).length>=t.MAX_CALLS_ALLOWED)return s("No more than "+t.MAX_CALLS_ALLOWED+" calls allowed");var u=t.generateSignature(r.callsResolvers[n]);r.callsResolvers[n][u]={success:i,fail:s},e.send(JSON.stringify({data:o,procedure:n,signature:u,type:a.WAMPRequestSchema.id}))})},e)}}]),t}();t.exports=s},function(t,e,r){"use strict";(function(t,r){function n(t,e){for(var r=-1,n=t?t.length:0,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function o(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function i(t){return function(e){return null==e?void 0:e[t]}}function a(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function s(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function l(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(){this.__data__=Le?Le(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function d(t){var e=this.__data__;if(Le){var r=e[t];return r===Wt?void 0:r}return Ee.call(e,t)?e[t]:void 0}function m(t){var e=this.__data__;return Le?void 0!==e[t]:Ee.call(e,t)}function y(t,e){return this.__data__[t]=Le&&void 0===e?Wt:e,this}function v(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__=[]}function g(t){var e=this.__data__,r=W(e,t);return!(r<0)&&(r==e.length-1?e.pop():qe.call(e,r,1),!0)}function _(t){var e=this.__data__,r=W(e,t);return r<0?void 0:e[r][1]}function w(t){return W(this.__data__,t)>-1}function S(t,e){var r=this.__data__,n=W(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function j(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function A(){this.__data__={hash:new l,map:new(Fe||v),string:new l}}function O(t){return at(this,t).delete(t)}function x(t){return at(this,t).get(t)}function E(t){return at(this,t).has(t)}function P(t,e){return at(this,t).set(t,e),this}function k(t){var e=-1,r=t?t.length:0;for(this.__data__=new j;++e<r;)this.add(t[e])}function R(t){return this.__data__.set(t,Wt),this}function C(t){return this.__data__.has(t)}function I(t){this.__data__=new v(t)}function q(){this.__data__=new v}function M(t){return this.__data__.delete(t)}function $(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function z(t,e){var r=this.__data__;if(r instanceof v){var n=r.__data__;if(!Fe||n.length<zt-1)return n.push([t,e]),this;r=this.__data__=new j(n)}return r.set(t,e),this}function T(t,e){var r=Ye(t)||St(t)?a(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!Ee.call(t,i)||o&&("length"==i||ft(i,n))||r.push(i);return r}function W(t,e){for(var r=t.length;r--;)if(wt(t[r][0],e))return r;return-1}function L(t,e){var r=[];return Xe(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function N(t,e){return t&&He(t,e,qt)}function Z(t,e){e=lt(e,t)?[e]:rt(e);for(var r=0,n=e.length;null!=t&&r<n;)t=t[vt(e[r++])];return r&&r==n?t:void 0}function U(t){return Pe.call(t)}function V(t,e){return null!=t&&e in Object(t)}function J(t,e,r,n,o){return t===e||(null==t||null==e||!Et(t)&&!Pt(e)?t!==t&&e!==e:B(t,e,J,r,n,o))}function B(t,e,r,n,o,i){var a=Ye(t),s=Ye(e),c=Jt,f=Jt;a||(c=Ke(t),c=c==Vt?Yt:c),s||(f=Ke(e),f=f==Vt?Yt:f);var l=c==Yt&&!u(t),h=f==Yt&&!u(e),p=c==f;if(p&&!l)return i||(i=new I),a||tr(t)?nt(t,e,r,n,o,i):ot(t,e,c,r,n,o,i);if(!(o&Nt)){var d=l&&Ee.call(t,"__wrapped__"),m=h&&Ee.call(e,"__wrapped__");if(d||m){var y=d?t.value():t,v=m?e.value():e;return i||(i=new I),r(y,v,n,o,i)}}return!!p&&(i||(i=new I),it(t,e,r,n,o,i))}function D(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){s=r[o];var u=s[0],c=t[u],f=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new I;if(n)var h=n(c,f,u,t,e,l);if(!(void 0===h?J(f,c,n,Lt|Nt,l):h))return!1}}return!0}function G(t){return!(!Et(t)||pt(t))&&(Ot(t)||u(t)?ke:ce).test(bt(t))}function X(t){return Pt(t)&&xt(t.length)&&!!le[Pe.call(t)]}function H(t){return"function"==typeof t?t:null==t?Mt:"object"==(void 0===t?"undefined":Ft(t))?Ye(t)?Y(t[0],t[1]):Q(t):$t(t)}function K(t){if(!dt(t))return Me(t);var e=[];for(var r in Object(t))Ee.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Q(t){var e=st(t);return 1==e.length&&e[0][2]?yt(e[0][0],e[0][1]):function(r){return r===t||D(r,t,e)}}function Y(t,e){return lt(t)&&mt(e)?yt(vt(t),e):function(r){var n=Ct(r,t);return void 0===n&&n===e?It(r,t):J(e,n,void 0,Lt|Nt)}}function tt(t){return function(e){return Z(e,t)}}function et(t){if("string"==typeof t)return t;if(kt(t))return Ge?Ge.call(t):"";var e=t+"";return"0"==e&&1/t==-Zt?"-0":e}function rt(t){return Ye(t)?t:Qe(t)}function nt(t,e,r,n,i,a){var s=i&Nt,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var l=-1,h=!0,p=i&Lt?new k:void 0;for(a.set(t,e),a.set(e,t);++l<u;){var d=t[l],m=e[l];if(n)var y=s?n(m,d,l,e,t,a):n(d,m,l,t,e,a);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!o(e,function(t,e){if(!p.has(e)&&(d===t||r(d,t,n,i,a)))return p.add(e)})){h=!1;break}}else if(d!==m&&!r(d,m,n,i,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function ot(t,e,r,n,o,i,a){switch(r){case ie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oe:return!(t.byteLength!=e.byteLength||!n(new Ce(t),new Ce(e)));case Bt:case Dt:case Qt:return wt(+t,+e);case Gt:return t.name==e.name&&t.message==e.message;case te:case re:return t==e+"";case Kt:var s=c;case ee:var u=i&Nt;if(s||(s=f),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;i|=Lt,a.set(t,e);var h=nt(s(t),s(e),n,o,i,a);return a.delete(t),h;case ne:if(De)return De.call(t)==De.call(e)}return!1}function it(t,e,r,n,o,i){var a=o&Nt,s=qt(t),u=s.length;if(u!=qt(e).length&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in e:Ee.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var h=!0;i.set(t,e),i.set(e,t);for(var p=a;++c<u;){f=s[c];var d=t[f],m=e[f];if(n)var y=a?n(m,d,f,e,t,i):n(d,m,f,t,e,i);if(!(void 0===y?d===m||r(d,m,n,o,i):y)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i.delete(t),i.delete(e),h}function at(t,e){var r=t.__data__;return ht(e)?r["string"==typeof e?"string":"hash"]:r.map}function st(t){for(var e=qt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,mt(o)]}return e}function ut(t,e){var r=s(t,e);return G(r)?r:void 0}function ct(t,e,r){e=lt(e,t)?[e]:rt(e);for(var n,o=-1,i=e.length;++o<i;){var a=vt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;var i=t?t.length:0;return!!i&&xt(i)&&ft(a,i)&&(Ye(t)||St(t))}function ft(t,e){return!!(e=null==e?Ut:e)&&("number"==typeof t||fe.test(t))&&t>-1&&t%1==0&&t<e}function lt(t,e){if(Ye(t))return!1;var r=void 0===t?"undefined":Ft(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!kt(t))||(se.test(t)||!ae.test(t)||null!=e&&t in Object(e))}function ht(t){var e=void 0===t?"undefined":Ft(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){return!!Oe&&Oe in t}function dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||je)}function mt(t){return t===t&&!Et(t)}function yt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function vt(t){if("string"==typeof t||kt(t))return t;var e=t+"";return"0"==e&&1/t==-Zt?"-0":e}function bt(t){if(null!=t){try{return xe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gt(t,e){return(Ye(t)?n:L)(t,H(e,3))}function _t(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Tt);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(_t.Cache||j),r}function wt(t,e){return t===e||t!==t&&e!==e}function St(t){return At(t)&&Ee.call(t,"callee")&&(!Ie.call(t,"callee")||Pe.call(t)==Vt)}function jt(t){return null!=t&&xt(t.length)&&!Ot(t)}function At(t){return Pt(t)&&jt(t)}function Ot(t){var e=Et(t)?Pe.call(t):"";return e==Xt||e==Ht}function xt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ut}function Et(t){var e=void 0===t?"undefined":Ft(t);return!!t&&("object"==e||"function"==e)}function Pt(t){return!!t&&"object"==(void 0===t?"undefined":Ft(t))}function kt(t){return"symbol"==(void 0===t?"undefined":Ft(t))||Pt(t)&&Pe.call(t)==ne}function Rt(t){return null==t?"":et(t)}function Ct(t,e,r){var n=null==t?void 0:Z(t,e);return void 0===n?r:n}function It(t,e){return null!=t&&ct(t,e,V)}function qt(t){return jt(t)?T(t):K(t)}function Mt(t){return t}function $t(t){return lt(t)?i(vt(t)):tt(t)}var Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt=200,Tt="Expected a function",Wt="__lodash_hash_undefined__",Lt=1,Nt=2,Zt=1/0,Ut=9007199254740991,Vt="[object Arguments]",Jt="[object Array]",Bt="[object Boolean]",Dt="[object Date]",Gt="[object Error]",Xt="[object Function]",Ht="[object GeneratorFunction]",Kt="[object Map]",Qt="[object Number]",Yt="[object Object]",te="[object RegExp]",ee="[object Set]",re="[object String]",ne="[object Symbol]",oe="[object ArrayBuffer]",ie="[object DataView]",ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,se=/^\w*$/,ue=/^\./,ce=/^\[object .+?Constructor\]$/,fe=/^(?:0|[1-9]\d*)$/,le={};le["[object Float32Array]"]=le["[object Float64Array]"]=le["[object Int8Array]"]=le["[object Int16Array]"]=le["[object Int32Array]"]=le["[object Uint8Array]"]=le["[object Uint8ClampedArray]"]=le["[object Uint16Array]"]=le["[object Uint32Array]"]=!0,le[Vt]=le[Jt]=le[oe]=le[Bt]=le[ie]=le[Dt]=le[Gt]=le[Xt]=le[Kt]=le[Qt]=le[Yt]=le[te]=le[ee]=le[re]=le["[object WeakMap]"]=!1;var he="object"==(void 0===t?"undefined":Ft(t))&&t&&t.Object===Object&&t,pe="object"==("undefined"==typeof self?"undefined":Ft(self))&&self&&self.Object===Object&&self,de=he||pe||Function("return this")(),me="object"==Ft(e)&&e&&!e.nodeType&&e,ye=me&&"object"==Ft(r)&&r&&!r.nodeType&&r,ve=ye&&ye.exports===me,be=ve&&he.process,ge=function(){try{return be&&be.binding("util")}catch(t){}}(),_e=ge&&ge.isTypedArray,we=Array.prototype,Se=Function.prototype,je=Object.prototype,Ae=de["__core-js_shared__"],Oe=function(){var t=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xe=Se.toString,Ee=je.hasOwnProperty,Pe=je.toString,ke=RegExp("^"+xe.call(Ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=de.Symbol,Ce=de.Uint8Array,Ie=je.propertyIsEnumerable,qe=we.splice,Me=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),$e=ut(de,"DataView"),Fe=ut(de,"Map"),ze=ut(de,"Promise"),Te=ut(de,"Set"),We=ut(de,"WeakMap"),Le=ut(Object,"create"),Ne=bt($e),Ze=bt(Fe),Ue=bt(ze),Ve=bt(Te),Je=bt(We),Be=Re?Re.prototype:void 0,De=Be?Be.valueOf:void 0,Ge=Be?Be.toString:void 0;l.prototype.clear=h,l.prototype.delete=p,l.prototype.get=d,l.prototype.has=m,l.prototype.set=y,v.prototype.clear=b,v.prototype.delete=g,v.prototype.get=_,v.prototype.has=w,v.prototype.set=S,j.prototype.clear=A,j.prototype.delete=O,j.prototype.get=x,j.prototype.has=E,j.prototype.set=P,k.prototype.add=k.prototype.push=R,k.prototype.has=C,I.prototype.clear=q,I.prototype.delete=M,I.prototype.get=$,I.prototype.has=F,I.prototype.set=z;var Xe=function(t,e){return function(r,n){if(null==r)return r;if(!jt(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}(N),He=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(r(i[u],u,i)===!1)break}return e}}(),Ke=U;($e&&Ke(new $e(new ArrayBuffer(1)))!=ie||Fe&&Ke(new Fe)!=Kt||ze&&"[object Promise]"!=Ke(ze.resolve())||Te&&Ke(new Te)!=ee||We&&"[object WeakMap]"!=Ke(new We))&&(Ke=function(t){var e=Pe.call(t),r=e==Yt?t.constructor:void 0,n=r?bt(r):void 0;if(n)switch(n){case Ne:return ie;case Ze:return Kt;case Ue:return"[object Promise]";case Ve:return ee;case Je:return"[object WeakMap]"}return e});var Qe=_t(function(t){t=Rt(t);var e=[];return ue.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,r,n,o){e.push(n?o.replace(/\\(\\)?/g,"$1"):r||t)}),e});_t.Cache=j;var Ye=Array.isArray,tr=_e?function(t){return function(e){return t(e)}}(_e):X;r.exports=gt}).call(e,r(2),r(7)(t))},function(t,e,r){"use strict";(function(e){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function i(){this.__data__=bt?bt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(bt){var r=e[t];return r===B?void 0:r}return ht.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return bt?void 0!==e[t]:ht.call(e,t)}function c(t,e){return this.__data__[t]=bt&&void 0===e?B:e,this}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function l(){this.__data__=[]}function h(t){var e=this.__data__,r=j(e,t);return!(r<0)&&(r==e.length-1?e.pop():yt.call(e,r,1),!0)}function p(t){var e=this.__data__,r=j(e,t);return r<0?void 0:e[r][1]}function d(t){return j(this.__data__,t)>-1}function m(t,e){var r=this.__data__,n=j(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function y(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(vt||f),string:new o}}function b(t){return P(this,t).delete(t)}function g(t){return P(this,t).get(t)}function _(t){return P(this,t).has(t)}function w(t,e){return P(this,t).set(t,e),this}function S(t,e,r){var n=t[e];ht.call(t,e)&&z(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function j(t,e){for(var r=t.length;r--;)if(z(t[r][0],e))return r;return-1}function A(t){return!(!W(t)||q(t))&&(T(t)||n(t)?dt:et).test($(t))}function O(t,e,r,n){if(!W(t))return t;e=C(e,t)?[e]:E(e);for(var o=-1,i=e.length,a=i-1,s=t;null!=s&&++o<i;){var u=M(e[o]),c=r;if(o!=a){var f=s[u];c=n?n(f,u,s):void 0,void 0===c&&(c=W(f)?f:R(e[o+1])?[]:{})}S(s,u,c),s=s[u]}return t}function x(t){if("string"==typeof t)return t;if(N(t))return _t?_t.call(t):"";var e=t+"";return"0"==e&&1/t==-D?"-0":e}function E(t){return St(t)?t:wt(t)}function P(t,e){var r=t.__data__;return I(e)?r["string"==typeof e?"string":"hash"]:r.map}function k(t,e){var n=r(t,e);return A(n)?n:void 0}function R(t,e){return!!(e=null==e?G:e)&&("number"==typeof t||rt.test(t))&&t>-1&&t%1==0&&t<e}function C(t,e){if(St(t))return!1;var r=void 0===t?"undefined":V(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!N(t))||(Y.test(t)||!Q.test(t)||null!=e&&t in Object(e))}function I(t){var e=void 0===t?"undefined":V(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function q(t){return!!ft&&ft in t}function M(t){if("string"==typeof t||N(t))return t;var e=t+"";return"0"==e&&1/t==-D?"-0":e}function $(t){if(null!=t){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function F(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(J);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(F.Cache||y),r}function z(t,e){return t===e||t!==t&&e!==e}function T(t){var e=W(t)?pt.call(t):"";return e==X||e==H}function W(t){var e=void 0===t?"undefined":V(t);return!!t&&("object"==e||"function"==e)}function L(t){return!!t&&"object"==(void 0===t?"undefined":V(t))}function N(t){return"symbol"==(void 0===t?"undefined":V(t))||L(t)&&pt.call(t)==K}function Z(t){return null==t?"":x(t)}function U(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:O(t,e,r,n)}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J="Expected a function",B="__lodash_hash_undefined__",D=1/0,G=9007199254740991,X="[object Function]",H="[object GeneratorFunction]",K="[object Symbol]",Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,tt=/^\./,et=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,nt="object"==(void 0===e?"undefined":V(e))&&e&&e.Object===Object&&e,ot="object"==("undefined"==typeof self?"undefined":V(self))&&self&&self.Object===Object&&self,it=nt||ot||Function("return this")(),at=Array.prototype,st=Function.prototype,ut=Object.prototype,ct=it["__core-js_shared__"],ft=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=st.toString,ht=ut.hasOwnProperty,pt=ut.toString,dt=RegExp("^"+lt.call(ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=it.Symbol,yt=at.splice,vt=k(it,"Map"),bt=k(Object,"create"),gt=mt?mt.prototype:void 0,_t=gt?gt.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=l,f.prototype.delete=h,f.prototype.get=p,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=_,y.prototype.set=w;var wt=F(function(t){t=Z(t);var e=[];return tt.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,r,n,o){e.push(n?o.replace(/\\(\\)?/g,"$1"):r||t)}),e});F.Cache=y;var St=Array.isArray;t.exports=U}).call(e,r(2))},,function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(5).Validator,u=r(18),c=r(6),f=(r(17),r(15)),l=r(16),h=r(1),p=new s,d=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.worker=t,i.sockets=t.scServer.clients,i.interProcessRPC={},i.config={},i.worker.on("masterMessage",function(t){if(h.isValid(t,h.MasterWAMPResponseSchema)||h.isValid(t,h.WAMPResponseSchema)){var e=i.sockets[t.socketId];if(!e)throw new Error("Socket that requested RPC call not found anymore");delete t.socketId,delete t.workerId,t.type=h.WAMPRequestSchema.id,i.reply(e,t,t.error,t.data)}else if(h.isValid(t,h.InterProcessRPCResponseSchema)){var n=i.getCall(t);n&&(n(t.err,t.data),i.deleteCall(t))}else if(h.isValid(t,h.MasterConfigResponseSchema))return i.config=Object.assign({},i.config,t.config),t.registeredEvents&&i.registerEventEndpoints(t.registeredEvents.reduce(function(t,e){return t[e]=function(){},t},{})),r(null,i)}),i}return i(e,t),a(e,[{key:"sendToMaster",value:function(t,e,r,n){var o=this.normalizeRequest({type:h.InterProcessRPCRequestSchema.id,procedure:t,data:e,socketId:r,workerId:this.worker.id,signature:l.generateSignature(c(this.interProcessRPC,r+"."+t,{}))});this.worker.sendToMaster(o),this.saveCall(o,n)}},{key:"processWAMPRequest",value:function(t,e){p.validate(t,h.WAMPRequestSchema).valid&&(t.socketId=e.id,t.workerId=this.worker.id,t.type=h.MasterWAMPRequestSchema.id,this.worker.sendToMaster(t))}},{key:"onSocketDisconnect",value:function(t){return delete this.interProcessRPC[t]}},{key:"normalizeRequest",value:function(t){return t.procedure=t.procedure.replace(/\./g,""),t.socketId=t.socketId.replace(/\./g,""),t}},{key:"getCall",value:function(t){return c(this.interProcessRPC,t.socketId+"."+t.procedure+"."+t.signature,!1)}},{key:"saveCall",value:function(t,e){return u(this.interProcessRPC,t.socketId+"."+t.procedure+"."+t.signature,e,Object)}},{key:"deleteCall",value:function(t){return delete this.interProcessRPC[t.socketId][t.procedure][t.signature]}}]),e}(f);t.exports=d}])});