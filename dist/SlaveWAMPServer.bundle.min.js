!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wampSocketCluster",[],t):"object"==typeof exports?exports.wampSocketCluster=t():e.wampSocketCluster=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,r){"use strict";function n(e,t){return t+": "+e.toString()+"\n"}function o(e,t,r,n){"object"===(void 0===r?"undefined":c(r))?t[n]=a(e[n],r):e.indexOf(r)===-1&&t.push(r)}function i(e,t,r){t[r]=e[r]}function s(e,t,r,n){"object"===c(t[n])&&t[n]&&e[n]?r[n]=a(e[n],t[n]):r[n]=t[n]}function a(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(o.bind(null,e,n))):(e&&"object"===(void 0===e?"undefined":c(e))&&Object.keys(e).forEach(i.bind(null,e,n)),Object.keys(t).forEach(s.bind(null,e,t,n))),n}function u(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=r(4),l=t.ValidationError=function(e,t,r,n,o,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=o,this.argument=i,this.stack=this.toString()};l.prototype.toString=function(){return this.property+" "+this.message};var p=t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&r.disableFormat===!0};p.prototype.addError=function(e){var t;if("string"==typeof e)t=new l(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new l(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},p.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},p.prototype.toString=function(e){return this.errors.map(n).join("")},Object.defineProperty(p.prototype,"valid",{get:function(){return!this.errors.length}});var h=t.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};h.prototype=Object.create(Error.prototype,{constructor:{value:h,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var d=t.SchemaContext=function(e,t,r,n,o){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=o};d.prototype.resolve=function(e){return f.resolve(this.base,e)},d.prototype.makeChild=function(e,t){var r=void 0===t?this.propertyPath:this.propertyPath+y(t),n=f.resolve(this.base,e.id||""),o=new d(e,this.options,r,n,Object.create(this.schemas));return e.id&&!o.schemas[n]&&(o.schemas[n]=e),o};var m=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};m.regexp=m.regex,m.pattern=m.regex,m.ipv4=m["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==m[t]){if(m[t]instanceof RegExp)return m[t].test(e);if("function"==typeof m[t])return m[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var y=t.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};t.deepCompareStrict=function e(t,r){if((void 0===t?"undefined":c(t))!==(void 0===r?"undefined":c(r)))return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every(function(n,o){return e(t[o],r[o])}));if("object"===(void 0===t?"undefined":c(t))){if(!t||!r)return t===r;var n=Object.keys(t),o=Object.keys(r);return n.length===o.length&&n.every(function(n){return e(t[n],r[n])})}return t===r},e.exports.deepMerge=a,t.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e},t.encodePath=function(e){return e.map(u).join("")}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,i,s={id:"/WAMPResponse",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"number"},success:{type:"boolean"},type:{type:"string"}},required:["type","procedure","signature","success","error"]},a={id:"/WAMPRequest",type:"object",properties:{data:{},signature:{type:"number"},procedure:{type:"string"},type:{type:"string"}},required:["type","procedure"]},u={id:"/MasterWAMPResponse",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"number"},socketId:{type:"string"},success:{type:"boolean"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure","success"]},c={id:"/MasterWAMPRequest",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"number"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","type","procedure"]},f={id:"/InterProcessRPCResponseSchema",type:"object",properties:{data:{},error:{},procedure:{type:"string"},signature:{type:"number"},socketId:{type:"string"},success:{type:"boolean"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure","success"]},l={id:"/InterProcessRPCRequestSchemaSchema",type:"object",properties:{data:{},procedure:{type:"string"},signature:{type:"number"},socketId:{type:"string"},type:{type:"string"},workerId:{type:"number"}},required:["workerId","socketId","signature","type","procedure"]},p={id:"/MasterConfigResponseSchema",type:"object",properties:{registeredEvents:{type:"array"},type:{type:"string"}},required:["registeredEvents","type"]},h={id:"/MasterConfigRequestSchema",type:"object",properties:{type:{type:"string"}},required:["type"]},d=(o={},n(o,s.id,a.id),n(o,u.id,a.id),n(o,f.id,l.id),n(o,p.id,h.id),o),m=(i={},n(i,a.id,s.id),n(i,c.id,s.id),n(i,l.id,f.id),n(i,h.id,p.id),i);e.exports={WAMPRequestSchema:a,WAMPResponseSchema:s,InterProcessRPCRequestSchema:l,InterProcessRPCResponseSchema:f,MasterWAMPResponseSchema:u,MasterWAMPRequestSchema:c,MasterConfigRequestSchema:h,MasterConfigResponseSchema:p,responsesIdsMap:d,requestsIdsMap:m}},function(e,t,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";var n=e.exports.Validator=r(9);e.exports.ValidatorResult=r(0).ValidatorResult,e.exports.ValidationError=r(0).ValidationError,e.exports.SchemaError=r(0).SchemaError,e.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&f.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return f.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=r(10),f=r(14);t.parse=o,t.resolve=s,t.resolveObject=a,t.format=i,t.Url=n;var l=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(m),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],g={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=r(13);n.prototype.parse=function(e,t,r){if(!f.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":u(e)));var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",i=e.split(o);i[0]=i[0].replace(/\\/g,"/"),e=i.join(o);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var a=h.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?w.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(s);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,s=s.substr(p.length)}if(r||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===s.substr(0,2);!m||p&&_[p]||(s=s.substr(2),this.slashes=!0)}if(!_[p]&&(m||p&&!S[p])){for(var j=-1,A=0;A<b.length;A++){var O=s.indexOf(b[A]);O!==-1&&(j===-1||O<j)&&(j=O)}var P,E;E=j===-1?s.lastIndexOf("@"):s.lastIndexOf("@",j),E!==-1&&(P=s.slice(0,E),s=s.slice(E+1),this.auth=decodeURIComponent(P)),j=-1;for(var A=0;A<v.length;A++){var O=s.indexOf(v[A]);O!==-1&&(j===-1||O<j)&&(j=O)}j===-1&&(j=s.length),this.host=s.slice(0,j),s=s.slice(j),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var R=this.hostname.split(/\./),A=0,k=R.length;A<k;A++){var I=R[A];if(I&&!I.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var C="",M=0,q=I.length;M<q;M++)I.charCodeAt(M)>127?C+="x":C+=I[M];if(!C.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var $=R.slice(0,A),F=R.slice(A+1),W=I.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);W&&($.push(W[1]),F.unshift(W[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=c.toASCII(this.hostname));var T=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+T,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!g[d])for(var A=0,k=y.length;A<k;A++){var z=y[A];if(s.indexOf(z)!==-1){var Z=encodeURIComponent(z);Z===z&&(Z=escape(z)),s=s.split(z).join(Z)}}var U=s.indexOf("#");U!==-1&&(this.hash=s.substr(U),s=s.slice(0,U));var L=s.indexOf("?");if(L!==-1?(this.search=s.substr(L),this.query=s.substr(L+1),t&&(this.query=w.parse(this.query)),s=s.slice(0,L)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var T=this.pathname||"",V=this.search||"";this.path=T+V}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(i=w.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(f.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=e[c])}return S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var h=l[p];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=b||v||r.host&&e.pathname,w=g,j=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],A=r.protocol&&!S[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(""===j[0]?j[0]=r.host:j.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),g=g&&(""===d[0]||""===j[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,j=d;else if(d.length)j||(j=[]),j.pop(),j=j.concat(d),r.search=e.search,r.query=e.query;else if(!f.isNullOrUndefined(e.search)){if(A){r.hostname=r.host=j.shift();var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return r.search=e.search,r.query=e.query,f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!j.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var P=j.slice(-1)[0],E=(r.host||e.host||j.length>1)&&("."===P||".."===P)||""===P,x=0,R=j.length;R>=0;R--)P=j[R],"."===P?j.splice(R,1):".."===P?(j.splice(R,1),x++):x&&(j.splice(R,1),x--);if(!g&&!w)for(;x--;x)j.unshift("..");!g||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),E&&"/"!==j.join("/").substr(-1)&&j.push("");var k=""===j[0]||j[0]&&"/"===j[0].charAt(0);if(A){r.hostname=r.host=k?"":j.length?j.shift():"";var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return g=g||r.host&&j.length,g&&!k&&j.unshift(""),j.length?r.pathname=j.join("/"):(r.pathname=null,r.path=null),f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";(function(t){function r(e,t){return null==e?void 0:e[t]}function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function i(){this.__data__=de?de(null):{}}function s(e){return this.has(e)&&delete this.__data__[e]}function a(e){var t=this.__data__;if(de){var r=t[e];return r===V?void 0:r}return ue.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return de?void 0!==t[e]:ue.call(t,e)}function c(e,t){return this.__data__[e]=de&&void 0===t?V:t,this}function f(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function l(){this.__data__=[]}function p(e){var t=this.__data__,r=w(t,e);return!(r<0)&&(r==t.length-1?t.pop():pe.call(t,r,1),!0)}function h(e){var t=this.__data__,r=w(t,e);return r<0?void 0:t[r][1]}function d(e){return w(this.__data__,e)>-1}function m(e,t){var r=this.__data__,n=w(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function y(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(he||f),string:new o}}function b(e){return E(this,e).delete(e)}function g(e){return E(this,e).get(e)}function _(e){return E(this,e).has(e)}function S(e,t){return E(this,e).set(e,t),this}function w(e,t){for(var r=e.length;r--;)if($(e[r][0],t))return r;return-1}function j(e,t){t=R(t,e)?[t]:P(t);for(var r=0,n=t.length;null!=e&&r<n;)e=e[C(t[r++])];return r&&r==n?e:void 0}function A(e){return!(!W(e)||I(e))&&(F(e)||n(e)?fe:Q).test(M(e))}function O(e){if("string"==typeof e)return e;if(N(e))return ye?ye.call(e):"";var t=e+"";return"0"==t&&1/e==-D?"-0":t}function P(e){return be(e)?e:ve(e)}function E(e,t){var r=e.__data__;return k(t)?r["string"==typeof t?"string":"hash"]:r.map}function x(e,t){var n=r(e,t);return A(n)?n:void 0}function R(e,t){if(be(e))return!1;var r=void 0===e?"undefined":U(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!N(e))||(K.test(e)||!H.test(e)||null!=t&&e in Object(t))}function k(e){var t=void 0===e?"undefined":U(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function I(e){return!!se&&se in e}function C(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-D?"-0":t}function M(e){if(null!=e){try{return ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function q(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(L);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(q.Cache||y),r}function $(e,t){return e===t||e!==e&&t!==t}function F(e){var t=W(e)?ce.call(e):"";return t==J||t==B}function W(e){var t=void 0===e?"undefined":U(e);return!!e&&("object"==t||"function"==t)}function T(e){return!!e&&"object"==(void 0===e?"undefined":U(e))}function N(e){return"symbol"==(void 0===e?"undefined":U(e))||T(e)&&ce.call(e)==G}function z(e){return null==e?"":O(e)}function Z(e,t,r){var n=null==e?void 0:j(e,t);return void 0===n?r:n}var U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L="Expected a function",V="__lodash_hash_undefined__",D=1/0,J="[object Function]",B="[object GeneratorFunction]",G="[object Symbol]",H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,X=/^\./,Q=/^\[object .+?Constructor\]$/,Y="object"==(void 0===t?"undefined":U(t))&&t&&t.Object===Object&&t,ee="object"==("undefined"==typeof self?"undefined":U(self))&&self&&self.Object===Object&&self,te=Y||ee||Function("return this")(),re=Array.prototype,ne=Function.prototype,oe=Object.prototype,ie=te["__core-js_shared__"],se=function(){var e=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ae=ne.toString,ue=oe.hasOwnProperty,ce=oe.toString,fe=RegExp("^"+ae.call(ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=te.Symbol,pe=re.splice,he=x(te,"Map"),de=x(Object,"create"),me=le?le.prototype:void 0,ye=me?me.toString:void 0;o.prototype.clear=i,o.prototype.delete=s,o.prototype.get=a,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=l,f.prototype.delete=p,f.prototype.get=h,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=_,y.prototype.set=S;var ve=q(function(e){e=z(e);var t=[];return X.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,r,n,o){t.push(n?o.replace(/\\(\\)?/g,"$1"):r||e)}),t});q.Cache=y;var be=Array.isArray;e.exports=Z}).call(t,r(2))},function(e,t,r){"use strict";function n(e,t,r,n,o){var i=this.validateSchema(e,o,t,r);return!i.valid&&n instanceof Function&&n(i),i.valid}function o(e,t,r,n,o,i){if(!t.properties||void 0===t.properties[o])if(t.additionalProperties===!1)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var s=t.additionalProperties||{},a=this.validateSchema(e[o],s,r,n.makeChild(s,o));a.instance!==i.instance[o]&&(i.instance[o]=a.instance),i.importErrors(a)}}function i(e,t,r){var n,o=r.length;for(n=t+1,o;n<o;n++)if(a.deepCompareStrict(e,r[n]))return!1;return!0}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(0),u=a.ValidatorResult,c=a.SchemaError,f={};f.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var l=f.validators={};l.type=function(e,t,r,n){if(void 0===e)return null;var o=new u(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var s=i.map(function(e){return e.id&&"<"+e.id+">"||e+""});o.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return o},l.anyOf=function(e,t,r,o){if(void 0===e)return null;var i=new u(e,t,r,o),s=new u(e,t,r,o);if(!Array.isArray(t.anyOf))throw new c("anyOf must be an array");if(!t.anyOf.some(n.bind(this,e,r,o,function(e){s.importErrors(e)}))){var a=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});r.nestedErrors&&i.importErrors(s),i.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return i},l.allOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new c("allOf must be an array");var o=new u(e,t,r,n),i=this;return t.allOf.forEach(function(t,s){var a=i.validateSchema(e,t,r,n);if(!a.valid){var u=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";o.addError({name:"allOf",argument:{id:u,length:a.errors.length,valid:a},message:"does not match allOf schema "+u+" with "+a.errors.length+" error[s]:"}),o.importErrors(a)}}),o},l.oneOf=function(e,t,r,o){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new c("oneOf must be an array");var i=new u(e,t,r,o),s=new u(e,t,r,o),a=t.oneOf.filter(n.bind(this,e,r,o,function(e){s.importErrors(e)})).length,f=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==a&&(r.nestedErrors&&i.importErrors(s),i.addError({name:"oneOf",argument:f,message:"is not exactly one from "+f.join(",")})),i},l.properties=function(e,t,r,n){if(void 0!==e&&e instanceof Object){var o=new u(e,t,r,n),i=t.properties||{};for(var s in i){var a=(e||void 0)&&e[s],c=this.validateSchema(a,i[s],r,n.makeChild(i[s],s));c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c)}return o}},l.patternProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){var i=new u(e,t,r,n),s=t.patternProperties||{};for(var a in e){var c=!0;for(var f in s){if(new RegExp(f).test(a)){c=!1;var l=this.validateSchema(e[a],s[f],r,n.makeChild(s[f],a));l.instance!==i.instance[a]&&(i.instance[a]=l.instance),i.importErrors(l)}}c&&o.call(this,e,t,r,n,a,i)}return i}},l.additionalProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var i=new u(e,t,r,n);for(var s in e)o.call(this,e,t,r,n,s,i);return i}},l.minProperties=function(e,t,r,n){if(!e||"object"!==(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);return Object.keys(e).length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o},l.maxProperties=function(e,t,r,n){if(!e||"object"!==(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);return Object.keys(e).length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o},l.items=function(e,t,r,n){if(!Array.isArray(e))return null;var o=this,i=new u(e,t,r,n);return void 0!==e&&t.items?(e.every(function(e,s){var a=Array.isArray(t.items)?t.items[s]||t.additionalItems:t.items;if(void 0===a)return!0;if(a===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(e,a,r,n.makeChild(a,s));return u.instance!==i.instance[s]&&(i.instance[s]=u.instance),i.importErrors(u),!0}),i):i},l.minimum=function(e,t,r,n){if("number"!=typeof e)return null;var o=new u(e,t,r,n),i=!0;return i=t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum:e>=t.minimum,i||o.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),o},l.maximum=function(e,t,r,n){if("number"!=typeof e)return null;var o,i=new u(e,t,r,n);return o=t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum:e<=t.maximum,o||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i},l.divisibleBy=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new c("divisibleBy cannot be zero");var o=new u(e,t,r,n);return e/t.divisibleBy%1&&o.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),o},l.multipleOf=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new c("multipleOf cannot be zero");var o=new u(e,t,r,n);return e/t.multipleOf%1&&o.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),o},l.required=function(e,t,r,n){var o=new u(e,t,r,n);return void 0===e&&t.required===!0?o.addError({name:"required",message:"is required"}):e&&"object"===(void 0===e?"undefined":s(e))&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),o},l.pattern=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.match(t.pattern)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),o},l.format=function(e,t,r,n){var o=new u(e,t,r,n);return o.disableFormat||a.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o},l.minLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.length>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o},l.maxLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new u(e,t,r,n);return e.length<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o},l.minItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o},l.maxItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o},l.uniqueItems=function(e,t,r,n){function o(e,t,r){for(var n=t+1;n<r.length;n++)if(a.deepCompareStrict(e,r[n]))return!1;return!0}var i=new u(e,t,r,n);return Array.isArray(e)?(e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},l.uniqueItems=function(e,t,r,n){if(!Array.isArray(e))return null;var o=new u(e,t,r,n);return e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},l.dependencies=function(e,t,r,n){if(!e||"object"!=(void 0===e?"undefined":s(e)))return null;var o=new u(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i],c=n.makeChild(a,i);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach(function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})});else{var f=this.validateSchema(e,a,r,c);o.instance!==f.instance&&(o.instance=f.instance),f&&f.errors.length&&(o.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),o.importErrors(f))}}return o},l.enum=function(e,t,r,n){if(!Array.isArray(t.enum))throw new c("enum expects an array",t);if(void 0===e)return null;var o=new u(e,t,r,n);return t.enum.some(a.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.join(",")}),o},l.not=l.disallow=function(e,t,r,n){var o=this;if(void 0===e)return null;var i=new u(e,t,r,n),s=t.not||t.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach(function(s){if(o.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;i.addError({name:"not",argument:a,message:"is of prohibited type "+a})}}),i):null},e.exports=f},function(e,t,r){"use strict";function n(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(4),s=r(8),a=r(0),u=a.ValidatorResult,c=a.SchemaError,f=a.SchemaContext,l=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(p),this.attributes=Object.create(s.validators)};l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(e,t){if(!e)return null;var r=t||e.id;return this.addSubSchema(r,e),r&&(this.schemas[r]=e),this.schemas[r]},l.prototype.addSubSchema=function(e,t){if(t&&"object"==(void 0===t?"undefined":o(t))){if(t.$ref){var r=i.resolve(e,t.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var n=t.id&&i.resolve(e,t.id),s=n||e;if(n){if(this.schemas[n]){if(!a.deepCompareStrict(this.schemas[n],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[n]}this.schemas[n]=t;var u=n.replace(/^([^#]*)#$/,"$1");this.schemas[u]=t}return this.addSubSchemaArray(s,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(s,t.extends instanceof Array?t.extends:[t.extends]),this.addSubSchema(s,t.additionalItems),this.addSubSchemaObject(s,t.properties),this.addSubSchema(s,t.additionalProperties),this.addSubSchemaObject(s,t.definitions),this.addSubSchemaObject(s,t.patternProperties),this.addSubSchemaObject(s,t.dependencies),this.addSubSchemaArray(s,t.disallow),this.addSubSchemaArray(s,t.allOf),this.addSubSchemaArray(s,t.anyOf),this.addSubSchemaArray(s,t.oneOf),this.addSubSchema(s,t.not),this.schemas[n]}},l.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},l.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==(void 0===t?"undefined":o(t)))for(var r in t)this.addSubSchema(e,t[r])},l.prototype.setSchemas=function(e){this.schemas=e},l.prototype.getSchema=function(e){return this.schemas[e]},l.prototype.validate=function(e,t,r,n){r||(r={});var o=r.propertyName||"instance",s=i.resolve(r.base||"/",t.id||"");if(n||(n=new f(t,r,o,s,Object.create(this.schemas)),n.schemas[s]||(n.schemas[s]=t)),t){var a=this.validateSchema(e,t,r,n);if(!a)throw new Error("Result undefined");return a}throw new c("no schema specified",t)},l.prototype.validateSchema=function(e,t,r,o){var i=new u(e,t,r,o);if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var l={schema:t,ctx:o};t.extends.forEach(this.schemaTraverser.bind(this,l)),t=l.schema,l.schema=null,l.ctx=null,l=null}else t=a.deepMerge(t,this.superResolve(t.extends,o));var p;if(p=n(t)){var h=this.resolve(t,p,o),d=new f(h.subschema,r,o.propertyPath,h.switchSchema,o.schemas);return this.validateSchema(e,h.subschema,r,d)}var m=r&&r.skipAttributes||[];for(var y in t)if(!s.ignoreProperties[y]&&m.indexOf(y)<0){var v=null,b=this.attributes[y];if(b)v=b.call(this,e,t,r,o);else if(r.allowUnknownAttributes===!1)throw new c("Unsupported attribute: "+y,t);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var g=r.rewrite.call(this,e,t,r,o);i.instance=g}return i},l.prototype.schemaTraverser=function(e,t){e.schema=a.deepMerge(e.schema,this.superResolve(t,e.ctx))},l.prototype.superResolve=function(e,t){var r;return(r=n(e))?this.resolve(e,r,t).subschema:e},l.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=i.parse(t),o=n&&n.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!r.schemas[s])throw new c("no such schema <"+t+">",e);var u=a.objectGetPath(r.schemas[s],o.substr(1));if(void 0===u)throw new c("no such schema "+o+" located in <"+s+">",e);return{subschema:u,switchSchema:t}},l.prototype.testType=function(e,t,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==(void 0===i?"undefined":o(i))){var s=this.validateSchema(e,i,r,n);return void 0===s||!(s&&s.errors.length)}return!0};var p=l.prototype.types={};p.string=function(e){return"string"==typeof e},p.number=function(e){return"number"==typeof e&&isFinite(e)},p.integer=function(e){return"number"==typeof e&&e%1==0},p.boolean=function(e){return"boolean"==typeof e},p.array=function(e){return e instanceof Array},p.null=function(e){return null===e},p.date=function(e){return e instanceof Date},p.any=function(e){return!0},p.object=function(e){return e&&"object"===(void 0===e?"undefined":o(e))&&!(e instanceof Array)&&!(e instanceof Date)},e.exports=l},function(e,t,r){"use strict";(function(e,n){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){function a(e){throw new RangeError(F[e])}function u(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function c(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace($,"."),n+u(e.split("."),t).join(".")}function f(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function l(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function p(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:O}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,r){var n=0;for(e=r?T(e/R):e>>1,e+=T(e/t);e>W*E>>1;n+=O)e=T(e/W);return T(n+(W+1)*e/(e+x))}function m(e){var t,r,n,o,i,s,u,c,f,h,m=[],y=e.length,v=0,b=I,g=k;for(r=e.lastIndexOf(C),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,s=1,u=O;o>=y&&a("invalid-input"),c=p(e.charCodeAt(o++)),(c>=O||c>T((A-v)/s))&&a("overflow"),v+=c*s,f=u<=g?P:u>=g+E?E:u-g,!(c<f);u+=O)h=O-f,s>T(A/h)&&a("overflow"),s*=h;t=m.length+1,g=d(v-i,t,0==i),T(v/t)>A-b&&a("overflow"),b+=T(v/t),v%=t,m.splice(v++,0,b)}return l(m)}function y(e){var t,r,n,o,i,s,u,c,l,p,m,y,v,b,g,_=[];for(e=f(e),y=e.length,t=I,r=0,i=k,s=0;s<y;++s)(m=e[s])<128&&_.push(N(m));for(n=o=_.length,o&&_.push(C);n<y;){for(u=A,s=0;s<y;++s)(m=e[s])>=t&&m<u&&(u=m);for(v=n+1,u-t>T((A-r)/v)&&a("overflow"),r+=(u-t)*v,t=u,s=0;s<y;++s)if(m=e[s],m<t&&++r>A&&a("overflow"),m==t){for(c=r,l=O;p=l<=i?P:l>=i+E?E:l-i,!(c<p);l+=O)g=c-p,b=O-p,_.push(N(h(p+g%b,0))),c=T(g/b);_.push(N(h(c,0))),i=d(r,v,n==o),r=0,++n}++r,++t}return _.join("")}function v(e){return c(e,function(e){return M.test(e)?m(e.slice(4).toLowerCase()):e})}function b(e){return c(e,function(e){return q.test(e)?"xn--"+y(e):e})}var g="object"==i(t)&&t&&!t.nodeType&&t,_="object"==i(e)&&e&&!e.nodeType&&e,S="object"==(void 0===n?"undefined":i(n))&&n;S.global!==S&&S.window!==S&&S.self!==S||(s=S);var w,j,A=2147483647,O=36,P=1,E=26,x=38,R=700,k=72,I=128,C="-",M=/^xn--/,q=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=O-P,T=Math.floor,N=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:f,encode:l},decode:m,encode:y,toASCII:b,toUnicode:v},"object"==i(r(5))&&r(5))void 0!==(o=function(){return w}.call(t,r,t,e))&&(e.exports=o);else if(g&&_)if(e.exports==g)_.exports=w;else for(j in w)w.hasOwnProperty(j)&&(g[j]=w[j]);else s.punycode=w}(void 0)}).call(t,r(6)(e),r(2))},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var f,l,p,h,d=e[c].replace(/\+/g,"%20"),m=d.indexOf(r);m>=0?(f=d.substr(0,m),l=d.substr(m+1)):(f=d,l=""),p=decodeURIComponent(f),h=decodeURIComponent(l),n(s,p)?o(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){switch(void 0===e?"undefined":o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":o(e))?n(a(e),function(o){var a=encodeURIComponent(i(o))+r;return s(e[o])?n(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(11),t.encode=t.stringify=r(12)},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3).Validator,s=r(1),a=new i,u=function(){function e(){n(this,e),this.endpoints={rpc:{},event:{}}}return o(e,[{key:"upgradeToWAMP",value:function(e){var t=this;return console.log("[36m%s[0m","WAMPServer ----- upgradeToWAMP",this.endpoints),e.on("raw",function(r){console.log("[36m%s[0m","WAMPServer ----- RECEIVED RPC CALL",r.procedure);try{r=JSON.parse(r)}catch(e){return}a.validate(r,s.WAMPRequestSchema).valid&&r.type===s.WAMPRequestSchema.id?t.processWAMPRequest(r,e):console.log("[36m%s[0m","WAMPServer processWAMPRequest WAMPRequestSchema.errors",a.validate(r,s.WAMPRequestSchema).errors)}),Object.keys(this.endpoints.event).forEach(function(r){e.on(r,function(n){console.log("[36m%s[0m","WAMPServer ----- RECEIVED EVENT CALL",r,n),t.processWAMPRequest({type:s.WAMPRequestSchema.id,procedure:r,data:n},e)})}),e}},{key:"processWAMPRequest",value:function(e,t){return console.log("[36m%s[0m","WampServer ----- processWAMPRequest received call procedure",e.procedure),this.endpoints.rpc[e.procedure]&&"function"==typeof this.endpoints.rpc[e.procedure]?(console.log("[36m%s[0m","WampServer ----- processWAMPRequest RPC"),this.endpoints.rpc[e.procedure](e.data,this.reply.bind(this,t,e))):this.endpoints.event[e.procedure]&&"function"==typeof this.endpoints.event[e.procedure]?(console.log("[36m%s[0m","WampServer ----- processWAMPRequest Event"),this.endpoints.event[e.procedure](e.data)):(console.log("[36m%s[0m","WampServer ----- processWAMPRequest not registered. reply now"),this.reply(t,e,"procedure "+e.procedure+" not registered on WAMPServer",null))}},{key:"reply",value:function(e,t,r,n){e.send(JSON.stringify({success:!r,data:n,error:r,type:s.WAMPResponseSchema.id,procedure:t.procedure,signature:t.signature}))}},{key:"registerRPCEndpoints",value:function(e){console.log("[36m%s[0m","ENDPOINTS: registerRPCEndpoints",e),this.endpoints.rpc=Object.assign(this.endpoints.rpc,e)}},{key:"registerEventEndpoints",value:function(e){console.log("[36m%s[0m","ENDPOINTS: registerEVENTEndpoints",e),this.endpoints.event=Object.assign(this.endpoints.event,e)}},{key:"reassignRPCEndpoints",value:function(e){console.log("[36m%s[0m","ENDPOINTS: reassignPCEndpoints",e),this.endpoints.rpc=e}},{key:"reassignEventEndpoints",value:function(e){console.log("[36m%s[0m","ENDPOINTS: reassignEventEndpoints",e),this.endpoints.event=e}}]),e}();e.exports=u},function(e,t,r){"use strict";(function(t){function r(e,t){return null==e?void 0:e[t]}function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function o(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function i(){this.__data__=be?be(null):{}}function s(e){return this.has(e)&&delete this.__data__[e]}function a(e){var t=this.__data__;if(be){var r=t[e];return r===J?void 0:r}return pe.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return be?void 0!==t[e]:pe.call(t,e)}function c(e,t){return this.__data__[e]=be&&void 0===t?J:t,this}function f(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function l(){this.__data__=[]}function p(e){var t=this.__data__,r=j(t,e);return!(r<0)&&(r==t.length-1?t.pop():ye.call(t,r,1),!0)}function h(e){var t=this.__data__,r=j(t,e);return r<0?void 0:t[r][1]}function d(e){return j(this.__data__,e)>-1}function m(e,t){var r=this.__data__,n=j(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function y(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(ve||f),string:new o}}function b(e){return x(this,e).delete(e)}function g(e){return x(this,e).get(e)}function _(e){return x(this,e).has(e)}function S(e,t){return x(this,e).set(e,t),this}function w(e,t,r){var n=e[t];pe.call(e,t)&&W(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function j(e,t){for(var r=e.length;r--;)if(W(e[r][0],t))return r;return-1}function A(e){return!(!N(e)||M(e))&&(T(e)||n(e)?de:te).test($(e))}function O(e,t,r,n){if(!N(e))return e;t=I(t,e)?[t]:E(t);for(var o=-1,i=t.length,s=i-1,a=e;null!=a&&++o<i;){var u=q(t[o]),c=r;if(o!=s){var f=a[u];c=n?n(f,u,a):void 0,void 0===c&&(c=N(f)?f:k(t[o+1])?[]:{})}w(a,u,c),a=a[u]}return e}function P(e){if("string"==typeof e)return e;if(Z(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-B?"-0":t}function E(e){return we(e)?e:Se(e)}function x(e,t){var r=e.__data__;return C(t)?r["string"==typeof t?"string":"hash"]:r.map}function R(e,t){var n=r(e,t);return A(n)?n:void 0}function k(e,t){return!!(t=null==t?G:t)&&("number"==typeof e||re.test(e))&&e>-1&&e%1==0&&e<t}function I(e,t){if(we(e))return!1;var r=void 0===e?"undefined":V(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Z(e))||(Y.test(e)||!Q.test(e)||null!=t&&e in Object(t))}function C(e){var t=void 0===e?"undefined":V(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function M(e){return!!fe&&fe in e}function q(e){if("string"==typeof e||Z(e))return e;var t=e+"";return"0"==t&&1/e==-B?"-0":t}function $(e){if(null!=e){try{return le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(D);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(F.Cache||y),r}function W(e,t){return e===t||e!==e&&t!==t}function T(e){var t=N(e)?he.call(e):"";return t==H||t==K}function N(e){var t=void 0===e?"undefined":V(e);return!!e&&("object"==t||"function"==t)}function z(e){return!!e&&"object"==(void 0===e?"undefined":V(e))}function Z(e){return"symbol"==(void 0===e?"undefined":V(e))||z(e)&&he.call(e)==X}function U(e){return null==e?"":P(e)}function L(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:O(e,t,r,n)}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D="Expected a function",J="__lodash_hash_undefined__",B=1/0,G=9007199254740991,H="[object Function]",K="[object GeneratorFunction]",X="[object Symbol]",Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,ee=/^\./,te=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,ne="object"==(void 0===t?"undefined":V(t))&&t&&t.Object===Object&&t,oe="object"==("undefined"==typeof self?"undefined":V(self))&&self&&self.Object===Object&&self,ie=ne||oe||Function("return this")(),se=Array.prototype,ae=Function.prototype,ue=Object.prototype,ce=ie["__core-js_shared__"],fe=function(){var e=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),le=ae.toString,pe=ue.hasOwnProperty,he=ue.toString,de=RegExp("^"+le.call(pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=ie.Symbol,ye=se.splice,ve=R(ie,"Map"),be=R(Object,"create"),ge=me?me.prototype:void 0,_e=ge?ge.toString:void 0;o.prototype.clear=i,o.prototype.delete=s,o.prototype.get=a,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=l,f.prototype.delete=p,f.prototype.get=h,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=_,y.prototype.set=S;var Se=F(function(e){e=U(e);var t=[];return ee.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,r,n,o){t.push(n?o.replace(/\\(\\)?/g,"$1"):r||e)}),t});F.Cache=y;var we=Array.isArray;e.exports=L}).call(t,r(2))},function(e,t,r){"use strict";(function(e,r){function n(e,t){for(var r=-1,n=e?e.length:0,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}function o(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function i(e){return function(t){return null==t?void 0:t[e]}}function s(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function a(e,t){return null==e?void 0:e[t]}function u(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function f(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function l(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function p(){this.__data__=zt?zt(null):{}}function h(e){return this.has(e)&&delete this.__data__[e]}function d(e){var t=this.__data__;if(zt){var r=t[e];return r===Ne?void 0:r}return Et.call(t,e)?t[e]:void 0}function m(e){var t=this.__data__;return zt?void 0!==t[e]:Et.call(t,e)}function y(e,t){return this.__data__[e]=zt&&void 0===t?Ne:t,this}function v(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function b(){this.__data__=[]}function g(e){var t=this.__data__,r=N(t,e);return!(r<0)&&(r==t.length-1?t.pop():Mt.call(t,r,1),!0)}function _(e){var t=this.__data__,r=N(t,e);return r<0?void 0:t[r][1]}function S(e){return N(this.__data__,e)>-1}function w(e,t){var r=this.__data__,n=N(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function j(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(){this.__data__={hash:new l,map:new(Ft||v),string:new l}}function O(e){return se(this,e).delete(e)}function P(e){return se(this,e).get(e)}function E(e){return se(this,e).has(e)}function x(e,t){return se(this,e).set(e,t),this}function R(e){var t=-1,r=e?e.length:0;for(this.__data__=new j;++t<r;)this.add(e[t])}function k(e){return this.__data__.set(e,Ne),this}function I(e){return this.__data__.has(e)}function C(e){this.__data__=new v(e)}function M(){this.__data__=new v}function q(e){return this.__data__.delete(e)}function $(e){return this.__data__.get(e)}function F(e){return this.__data__.has(e)}function W(e,t){var r=this.__data__;if(r instanceof v){var n=r.__data__;if(!Ft||n.length<We-1)return n.push([e,t]),this;r=this.__data__=new j(n)}return r.set(e,t),this}function T(e,t){var r=Yt(e)||we(e)?s(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!Et.call(e,i)||o&&("length"==i||fe(i,n))||r.push(i);return r}function N(e,t){for(var r=e.length;r--;)if(Se(e[r][0],t))return r;return-1}function z(e,t){var r=[];return Ht(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}function Z(e,t){return e&&Kt(e,t,Me)}function U(e,t){t=le(t,e)?[t]:re(t);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ve(t[r++])];return r&&r==n?e:void 0}function L(e){return xt.call(e)}function V(e,t){return null!=e&&t in Object(e)}function D(e,t,r,n,o){return e===t||(null==e||null==t||!Ee(e)&&!xe(t)?e!==e&&t!==t:J(e,t,D,r,n,o))}function J(e,t,r,n,o,i){var s=Yt(e),a=Yt(t),c=De,f=De;s||(c=Xt(e),c=c==Ve?Ye:c),a||(f=Xt(t),f=f==Ve?Ye:f);var l=c==Ye&&!u(e),p=f==Ye&&!u(t),h=c==f;if(h&&!l)return i||(i=new C),s||er(e)?ne(e,t,r,n,o,i):oe(e,t,c,r,n,o,i);if(!(o&Ze)){var d=l&&Et.call(e,"__wrapped__"),m=p&&Et.call(t,"__wrapped__");if(d||m){var y=d?e.value():e,v=m?t.value():t;return i||(i=new C),r(y,v,n,o,i)}}return!!h&&(i||(i=new C),ie(e,t,r,n,o,i))}function B(e,t,r,n){var o=r.length,i=o,s=!n;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var u=a[0],c=e[u],f=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{var l=new C;if(n)var p=n(c,f,u,e,t,l);if(!(void 0===p?D(f,c,n,ze|Ze,l):p))return!1}}return!0}function G(e){return!(!Ee(e)||he(e))&&(Oe(e)||u(e)?Rt:ct).test(be(e))}function H(e){return xe(e)&&Pe(e.length)&&!!lt[xt.call(e)]}function K(e){return"function"==typeof e?e:null==e?qe:"object"==(void 0===e?"undefined":Fe(e))?Yt(e)?Y(e[0],e[1]):Q(e):$e(e)}function X(e){if(!de(e))return qt(e);var t=[];for(var r in Object(e))Et.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Q(e){var t=ae(e);return 1==t.length&&t[0][2]?ye(t[0][0],t[0][1]):function(r){return r===e||B(r,e,t)}}function Y(e,t){return le(e)&&me(t)?ye(ve(e),t):function(r){var n=Ie(r,e);return void 0===n&&n===t?Ce(r,e):D(t,n,void 0,ze|Ze)}}function ee(e){return function(t){return U(t,e)}}function te(e){if("string"==typeof e)return e;if(Re(e))return Gt?Gt.call(e):"";var t=e+"";return"0"==t&&1/e==-Ue?"-0":t}function re(e){return Yt(e)?e:Qt(e)}function ne(e,t,r,n,i,s){var a=i&Ze,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var f=s.get(e);if(f&&s.get(t))return f==t;var l=-1,p=!0,h=i&ze?new R:void 0;for(s.set(e,t),s.set(t,e);++l<u;){var d=e[l],m=t[l];if(n)var y=a?n(m,d,l,t,e,s):n(d,m,l,e,t,s);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!o(t,function(e,t){if(!h.has(t)&&(d===e||r(d,e,n,i,s)))return h.add(t)})){p=!1;break}}else if(d!==m&&!r(d,m,n,i,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function oe(e,t,r,n,o,i,s){switch(r){case it:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ot:return!(e.byteLength!=t.byteLength||!n(new It(e),new It(t)));case Je:case Be:case Qe:return Se(+e,+t);case Ge:return e.name==t.name&&e.message==t.message;case et:case rt:return e==t+"";case Xe:var a=c;case tt:var u=i&Ze;if(a||(a=f),e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;i|=ze,s.set(e,t);var p=ne(a(e),a(t),n,o,i,s);return s.delete(e),p;case nt:if(Bt)return Bt.call(e)==Bt.call(t)}return!1}function ie(e,t,r,n,o,i){var s=o&Ze,a=Me(e),u=a.length;if(u!=Me(t).length&&!s)return!1;for(var c=u;c--;){var f=a[c];if(!(s?f in t:Et.call(t,f)))return!1}var l=i.get(e);if(l&&i.get(t))return l==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=s;++c<u;){f=a[c];var d=e[f],m=t[f];if(n)var y=s?n(m,d,f,t,e,i):n(d,m,f,e,t,i);if(!(void 0===y?d===m||r(d,m,n,o,i):y)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(e),i.delete(t),p}function se(e,t){var r=e.__data__;return pe(t)?r["string"==typeof t?"string":"hash"]:r.map}function ae(e){for(var t=Me(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,me(o)]}return t}function ue(e,t){var r=a(e,t);return G(r)?r:void 0}function ce(e,t,r){t=le(t,e)?[t]:re(t);for(var n,o=-1,i=t.length;++o<i;){var s=ve(t[o]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}if(n)return n;var i=e?e.length:0;return!!i&&Pe(i)&&fe(s,i)&&(Yt(e)||we(e))}function fe(e,t){return!!(t=null==t?Le:t)&&("number"==typeof e||ft.test(e))&&e>-1&&e%1==0&&e<t}function le(e,t){if(Yt(e))return!1;var r=void 0===e?"undefined":Fe(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Re(e))||(at.test(e)||!st.test(e)||null!=t&&e in Object(t))}function pe(e){var t=void 0===e?"undefined":Fe(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function he(e){return!!Ot&&Ot in e}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jt)}function me(e){return e===e&&!Ee(e)}function ye(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function ve(e){if("string"==typeof e||Re(e))return e;var t=e+"";return"0"==t&&1/e==-Ue?"-0":t}function be(e){if(null!=e){try{return Pt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ge(e,t){return(Yt(e)?n:z)(e,K(t,3))}function _e(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Te);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(_e.Cache||j),r}function Se(e,t){return e===t||e!==e&&t!==t}function we(e){return Ae(e)&&Et.call(e,"callee")&&(!Ct.call(e,"callee")||xt.call(e)==Ve)}function je(e){return null!=e&&Pe(e.length)&&!Oe(e)}function Ae(e){return xe(e)&&je(e)}function Oe(e){var t=Ee(e)?xt.call(e):"";return t==He||t==Ke}function Pe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Le}function Ee(e){var t=void 0===e?"undefined":Fe(e);return!!e&&("object"==t||"function"==t)}function xe(e){return!!e&&"object"==(void 0===e?"undefined":Fe(e))}function Re(e){return"symbol"==(void 0===e?"undefined":Fe(e))||xe(e)&&xt.call(e)==nt}function ke(e){return null==e?"":te(e)}function Ie(e,t,r){var n=null==e?void 0:U(e,t);return void 0===n?r:n}function Ce(e,t){return null!=e&&ce(e,t,V)}function Me(e){return je(e)?T(e):X(e)}function qe(e){return e}function $e(e){return le(e)?i(ve(e)):ee(e)}var Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We=200,Te="Expected a function",Ne="__lodash_hash_undefined__",ze=1,Ze=2,Ue=1/0,Le=9007199254740991,Ve="[object Arguments]",De="[object Array]",Je="[object Boolean]",Be="[object Date]",Ge="[object Error]",He="[object Function]",Ke="[object GeneratorFunction]",Xe="[object Map]",Qe="[object Number]",Ye="[object Object]",et="[object RegExp]",tt="[object Set]",rt="[object String]",nt="[object Symbol]",ot="[object ArrayBuffer]",it="[object DataView]",st=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/,ut=/^\./,ct=/^\[object .+?Constructor\]$/,ft=/^(?:0|[1-9]\d*)$/,lt={};lt["[object Float32Array]"]=lt["[object Float64Array]"]=lt["[object Int8Array]"]=lt["[object Int16Array]"]=lt["[object Int32Array]"]=lt["[object Uint8Array]"]=lt["[object Uint8ClampedArray]"]=lt["[object Uint16Array]"]=lt["[object Uint32Array]"]=!0,lt[Ve]=lt[De]=lt[ot]=lt[Je]=lt[it]=lt[Be]=lt[Ge]=lt[He]=lt[Xe]=lt[Qe]=lt[Ye]=lt[et]=lt[tt]=lt[rt]=lt["[object WeakMap]"]=!1;var pt="object"==(void 0===e?"undefined":Fe(e))&&e&&e.Object===Object&&e,ht="object"==("undefined"==typeof self?"undefined":Fe(self))&&self&&self.Object===Object&&self,dt=pt||ht||Function("return this")(),mt="object"==Fe(t)&&t&&!t.nodeType&&t,yt=mt&&"object"==Fe(r)&&r&&!r.nodeType&&r,vt=yt&&yt.exports===mt,bt=vt&&pt.process,gt=function(){try{return bt&&bt.binding("util")}catch(e){}}(),_t=gt&&gt.isTypedArray,St=Array.prototype,wt=Function.prototype,jt=Object.prototype,At=dt["__core-js_shared__"],Ot=function(){var e=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pt=wt.toString,Et=jt.hasOwnProperty,xt=jt.toString,Rt=RegExp("^"+Pt.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=dt.Symbol,It=dt.Uint8Array,Ct=jt.propertyIsEnumerable,Mt=St.splice,qt=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),$t=ue(dt,"DataView"),Ft=ue(dt,"Map"),Wt=ue(dt,"Promise"),Tt=ue(dt,"Set"),Nt=ue(dt,"WeakMap"),zt=ue(Object,"create"),Zt=be($t),Ut=be(Ft),Lt=be(Wt),Vt=be(Tt),Dt=be(Nt),Jt=kt?kt.prototype:void 0,Bt=Jt?Jt.valueOf:void 0,Gt=Jt?Jt.toString:void 0;l.prototype.clear=p,l.prototype.delete=h,l.prototype.get=d,l.prototype.has=m,l.prototype.set=y,v.prototype.clear=b,v.prototype.delete=g,v.prototype.get=_,v.prototype.has=S,v.prototype.set=w,j.prototype.clear=A,j.prototype.delete=O,j.prototype.get=P,j.prototype.has=E,j.prototype.set=x,R.prototype.add=R.prototype.push=k,R.prototype.has=I,C.prototype.clear=M,C.prototype.delete=q,C.prototype.get=$,C.prototype.has=F,C.prototype.set=W;var Ht=function(e,t){return function(r,n){if(null==r)return r;if(!je(r))return e(r,n);for(var o=r.length,i=t?o:-1,s=Object(r);(t?i--:++i<o)&&n(s[i],i,s)!==!1;);return r}}(Z),Kt=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(r(i[u],u,i)===!1)break}return t}}(),Xt=L;($t&&Xt(new $t(new ArrayBuffer(1)))!=it||Ft&&Xt(new Ft)!=Xe||Wt&&"[object Promise]"!=Xt(Wt.resolve())||Tt&&Xt(new Tt)!=tt||Nt&&"[object WeakMap]"!=Xt(new Nt))&&(Xt=function(e){var t=xt.call(e),r=t==Ye?e.constructor:void 0,n=r?be(r):void 0;if(n)switch(n){case Zt:return it;case Ut:return Xe;case Lt:return"[object Promise]";case Vt:return tt;case Dt:return"[object WeakMap]"}return t});var Qt=_e(function(e){e=ke(e);var t=[];return ut.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,r,n,o){t.push(n?o.replace(/\\(\\)?/g,"$1"):r||e)}),t});_e.Cache=j;var Yt=Array.isArray,er=_t?function(e){return function(t){return e(t)}}(_t):H;r.exports=ge}).call(t,r(2),r(6)(e))},,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(3).Validator,u=r(16),c=r(7),f=(r(17),r(15)),l=r(1),p=new a,h=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.worker=e,r.sockets=e.scServer.clients,r.interProcessRPC={},r.worker.on("masterMessage",function(e){if(console.log("[36m%s[0m","SlaveWAMPServer ON masterMessage: workerId",e),p.validate(e,l.MasterWAMPResponseSchema).valid&&e.type===l.MasterWAMPResponseSchema.id){console.log("[36m%s[0m","SlaveWAMPServer ON passed MasterWAMPResponseSchema verification. resp to socket: ",r.sockets[e.socketId].id);var t=r.sockets[e.socketId];t&&(delete e.socketId,delete e.workerId,e.type=l.WAMPResponseSchema.id,r.reply(t,e,e.error,e.data))}else if(p.validate(e,l.InterProcessRPCResponseSchema).valid&&e.type===l.InterProcessRPCResponseSchema.id){console.log("[36m%s[0m","SlaveWAMPServer ON passed InterProcessRPCResponseSchema verification. resp to call: ",r.interProcessRPC,r.getCall(e));var n=r.getCall(e);n&&(n(e.err,e.data),r.deleteCall(e))}else p.validate(e,l.MasterConfigResponseSchema).valid&&e.type===l.MasterConfigResponseSchema.id&&(console.log("[36m%s[0m","SlaveWAMPServer ON passed MasterConfigResponseSchema verification. endpoints: ",e),r.registerEventEndpoints(e.registeredEvents.reduce(function(e,t){return e[t]=function(){},e},{})))}),r}return i(t,e),s(t,[{key:"sendToMaster",value:function(e,t,r,n){console.log("[36m%s[0m","SlaveWAMPServer sendToMaster: workerId",this.worker.id,(new Date).getTime());var o=this.normalizeRequest({type:l.InterProcessRPCRequestSchema.id,procedure:e,data:t,socketId:r,workerId:this.worker.id,signature:(new Date).getTime()});this.worker.sendToMaster(o),this.saveCall(o,n),console.log("[36m%s[0m","SlaveWAMPServer savedCall",this.interProcessRPC)}},{key:"processWAMPRequest",value:function(e,t){p.validate(e,l.WAMPRequestSchema).valid?(e.socketId=t.id,e.workerId=this.worker.id,e.type=l.MasterWAMPRequestSchema.id,this.worker.sendToMaster(e)):console.log("[36m%s[0m","SlaveWAMPServer processWAMPRequest WAMPRequestSchema.errors",p.validate(e,l.WAMPRequestSchema).errors)}},{key:"onSocketDisconnect",value:function(e){return delete this.interProcessRPC[e]}},{key:"normalizeRequest",value:function(e){return console.log("[36m%s[0m","SlaveWAMPServer normalizeRequest: request",e),e.procedure=e.procedure.replace(/\./g,""),e.socketId=e.socketId.replace(/\./g,""),e}},{key:"getCall",value:function(e){return c(this.interProcessRPC,e.socketId+"."+e.procedure+"."+e.signature,!1)}},{key:"saveCall",value:function(e,t){return u(this.interProcessRPC,e.socketId+"."+e.procedure+"."+e.signature,t,Object)}},{key:"deleteCall",value:function(e){return delete this.interProcessRPC[e.socketId][e.procedure][e.signature]}}]),t}(f);e.exports=h}])});