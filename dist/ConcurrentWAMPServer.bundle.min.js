!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wampSocketCluster",[],e):"object"==typeof exports?exports.wampSocketCluster=e():t.wampSocketCluster=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)}([function(t,e,r){"use strict";function n(t,e){return e+": "+t.toString()+"\n"}function o(t,e,r,n){"object"===(void 0===r?"undefined":c(r))?e[n]=s(t[n],r):t.indexOf(r)===-1&&e.push(r)}function i(t,e,r){e[r]=t[r]}function a(t,e,r,n){"object"===c(e[n])&&e[n]&&t[n]?r[n]=s(t[n],e[n]):r[n]=e[n]}function s(t,e){var r=Array.isArray(e),n=r&&[]||{};return r?(t=t||[],n=n.concat(t),e.forEach(o.bind(null,t,n))):(t&&"object"===(void 0===t?"undefined":c(t))&&Object.keys(t).forEach(i.bind(null,t,n)),Object.keys(e).forEach(a.bind(null,t,e,n))),n}function u(t){return"/"+encodeURIComponent(t).replace(/~/g,"%7E")}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=r(3),h=e.ValidationError=function(t,e,r,n,o,i){n&&(this.property=n),t&&(this.message=t),r&&(r.id?this.schema=r.id:this.schema=r),e&&(this.instance=e),this.name=o,this.argument=i,this.stack=this.toString()};h.prototype.toString=function(){return this.property+" "+this.message};var l=e.ValidatorResult=function(t,e,r,n){this.instance=t,this.schema=e,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&r.disableFormat===!0};l.prototype.addError=function(t){var e;if("string"==typeof t)e=new h(t,this.instance,this.schema,this.propertyPath);else{if(!t)throw new Error("Missing error detail");if(!t.message)throw new Error("Missing error message");if(!t.name)throw new Error("Missing validator type");e=new h(t.message,this.instance,this.schema,this.propertyPath,t.name,t.argument)}if(this.throwError)throw e;return this.errors.push(e),e},l.prototype.importErrors=function(t){"string"==typeof t||t&&t.validatorType?this.addError(t):t&&t.errors&&Array.prototype.push.apply(this.errors,t.errors)},l.prototype.toString=function(t){return this.errors.map(n).join("")},Object.defineProperty(l.prototype,"valid",{get:function(){return!this.errors.length}});var p=e.SchemaError=function t(e,r){this.message=e,this.schema=r,Error.call(this,e),Error.captureStackTrace(this,t)};p.prototype=Object.create(Error.prototype,{constructor:{value:p,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var d=e.SchemaContext=function(t,e,r,n,o){this.schema=t,this.options=e,this.propertyPath=r,this.base=n,this.schemas=o};d.prototype.resolve=function(t){return f.resolve(this.base,t)},d.prototype.makeChild=function(t,e){var r=void 0===e?this.propertyPath:this.propertyPath+y(e),n=f.resolve(this.base,t.id||""),o=new d(t,this.options,r,n,Object.create(this.schemas));return t.id&&!o.schemas[n]&&(o.schemas[n]=t),o};var m=e.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(t){return"string"==typeof t&&parseFloat(t)===parseInt(t,10)&&!isNaN(t)},regex:function(t){var e=!0;try{new RegExp(t)}catch(t){e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};m.regexp=m.regex,m.pattern=m.regex,m.ipv4=m["ip-address"],e.isFormat=function(t,e,r){if("string"==typeof t&&void 0!==m[e]){if(m[e]instanceof RegExp)return m[e].test(t);if("function"==typeof m[e])return m[e](t)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[e])return r.customFormats[e](t);return!0};var y=e.makeSuffix=function(t){return t=t.toString(),t.match(/[.\s\[\]]/)||t.match(/^[\d]/)?t.match(/^\d+$/)?"["+t+"]":"["+JSON.stringify(t)+"]":"."+t};e.deepCompareStrict=function t(e,r){if((void 0===e?"undefined":c(e))!==(void 0===r?"undefined":c(r)))return!1;if(e instanceof Array)return r instanceof Array&&(e.length===r.length&&e.every(function(n,o){return t(e[o],r[o])}));if("object"===(void 0===e?"undefined":c(e))){if(!e||!r)return e===r;var n=Object.keys(e),o=Object.keys(r);return n.length===o.length&&n.every(function(n){return t(e[n],r[n])})}return e===r},t.exports.deepMerge=s,e.objectGetPath=function(t,e){for(var r,n=e.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in t))return;t=t[o]}return t},e.encodePath=function(t){return t.map(u).join("")}},function(t,e,r){"use strict";t.exports.WAMPResultSchema={id:"/WAMPResult",type:"object",properties:{type:{type:"string"},procedure:{type:"string"},data:{},success:{type:"boolean"}},required:["type","procedure","success"]},t.exports.WAMPCallSchema={id:"/WAMPCall",type:"object",properties:{type:{type:"string"},procedure:{type:"string"},data:{}},required:["type","procedure"]},t.exports.ConcurrentWAMPResultSchema={id:"/ConcurrentWAMPRequest",type:"object",properties:{workerId:{type:"number"},socketId:{type:"string"},type:{type:"string"},procedure:{type:"string"},data:{},success:{type:"boolean"}},required:["workerId","socketId","type","procedure","success"]}},function(t,e,r){"use strict";var n=t.exports.Validator=r(7);t.exports.ValidatorResult=r(0).ValidatorResult,t.exports.ValidationError=r(0).ValidationError,t.exports.SchemaError=r(0).SchemaError,t.exports.validate=function(t,e,r){return(new n).validate(t,e,r)}},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&f.isObject(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function i(t){return f.isString(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=r(8),f=r(12);e.parse=o,e.resolve=a,e.resolveObject=s,e.format=i,e.Url=n;var h=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(m),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],g={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=r(11);n.prototype.parse=function(t,e,r){if(!f.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===t?"undefined":u(t)));var n=t.indexOf("?"),o=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/"),t=i.join(o);var a=t;if(a=a.trim(),!r&&1===t.split("#").length){var s=p.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=h.exec(a);if(l){l=l[0];var d=l.toLowerCase();this.protocol=d,a=a.substr(l.length)}if(r||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||l&&S[l]||(a=a.substr(2),this.slashes=!0)}if(!S[l]&&(m||l&&!w[l])){for(var A=-1,O=0;O<b.length;O++){var j=a.indexOf(b[O]);j!==-1&&(A===-1||j<A)&&(A=j)}var x,E;E=A===-1?a.lastIndexOf("@"):a.lastIndexOf("@",A),E!==-1&&(x=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(x)),A=-1;for(var O=0;O<v.length;O++){var j=a.indexOf(v[O]);j!==-1&&(A===-1||j<A)&&(A=j)}A===-1&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),O=0,k=C.length;O<k;O++){var $=C[O];if($&&!$.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var F="",I=0,R=$.length;I<R;I++)$.charCodeAt(I)>127?F+="x":F+=$[I];if(!F.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var q=C.slice(0,O),M=C.slice(O+1),z=$.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);z&&(q.push(z[1]),M.unshift(z[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=c.toASCII(this.hostname));var Z=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+Z,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!g[d])for(var O=0,k=y.length;O<k;O++){var T=y[O];if(a.indexOf(T)!==-1){var U=encodeURIComponent(T);U===T&&(U=escape(T)),a=a.split(T).join(U)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var L=a.indexOf("?");if(L!==-1?(this.search=a.substr(L),this.query=a.substr(L+1),e&&(this.query=_.parse(this.query)),a=a.slice(0,L)):e&&(this.search="",this.query={}),a&&(this.pathname=a),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Z=this.pathname||"",J=this.search||"";this.path=Z+J}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(f.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(r[c]=t[c])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var p=h[l];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",y=r.search||"";r.path=m+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=b||v||r.host&&t.pathname,_=g,A=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],O=r.protocol&&!w[r.protocol];if(O&&(r.hostname="",r.port=null,r.host&&(""===A[0]?A[0]=r.host:A.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),g=g&&(""===d[0]||""===A[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,A=d;else if(d.length)A||(A=[]),A.pop(),A=A.concat(d),r.search=t.search,r.query=t.query;else if(!f.isNullOrUndefined(t.search)){if(O){r.hostname=r.host=A.shift();var j=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return r.search=t.search,r.query=t.query,f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!A.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=A.slice(-1)[0],E=(r.host||t.host||A.length>1)&&("."===x||".."===x)||""===x,P=0,C=A.length;C>=0;C--)x=A[C],"."===x?A.splice(C,1):".."===x?(A.splice(C,1),P++):P&&(A.splice(C,1),P--);if(!g&&!_)for(;P--;P)A.unshift("..");!g||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),E&&"/"!==A.join("/").substr(-1)&&A.push("");var k=""===A[0]||A[0]&&"/"===A[0].charAt(0);if(O){r.hostname=r.host=k?"":A.length?A.shift():"";var j=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");j&&(r.auth=j.shift(),r.host=r.hostname=j.shift())}return g=g||r.host&&A.length,g&&!k&&A.unshift(""),A.length?r.pathname=A.join("/"):(r.pathname=null,r.path=null),f.isNull(r.pathname)&&f.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,r){"use strict";function n(t,e,r,n,o){var i=this.validateSchema(t,o,e,r);return!i.valid&&n instanceof Function&&n(i),i.valid}function o(t,e,r,n,o,i){if(!e.properties||void 0===e.properties[o])if(e.additionalProperties===!1)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var a=e.additionalProperties||{},s=this.validateSchema(t[o],a,r,n.makeChild(a,o));s.instance!==i.instance[o]&&(i.instance[o]=s.instance),i.importErrors(s)}}function i(t,e,r){var n,o=r.length;for(n=e+1,o;n<o;n++)if(s.deepCompareStrict(t,r[n]))return!1;return!0}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(0),u=s.ValidatorResult,c=s.SchemaError,f={};f.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var h=f.validators={};h.type=function(t,e,r,n){if(void 0===t)return null;var o=new u(t,e,r,n),i=Array.isArray(e.type)?e.type:[e.type];if(!i.some(this.testType.bind(this,t,e,r,n))){var a=i.map(function(t){return t.id&&"<"+t.id+">"||t+""});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o},h.anyOf=function(t,e,r,o){if(void 0===t)return null;var i=new u(t,e,r,o),a=new u(t,e,r,o);if(!Array.isArray(e.anyOf))throw new c("anyOf must be an array");if(!e.anyOf.some(n.bind(this,t,r,o,function(t){a.importErrors(t)}))){var s=e.anyOf.map(function(t,e){return t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+e+"]"});r.nestedErrors&&i.importErrors(a),i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},h.allOf=function(t,e,r,n){if(void 0===t)return null;if(!Array.isArray(e.allOf))throw new c("allOf must be an array");var o=new u(t,e,r,n),i=this;return e.allOf.forEach(function(e,a){var s=i.validateSchema(t,e,r,n);if(!s.valid){var u=e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+a+"]";o.addError({name:"allOf",argument:{id:u,length:s.errors.length,valid:s},message:"does not match allOf schema "+u+" with "+s.errors.length+" error[s]:"}),o.importErrors(s)}}),o},h.oneOf=function(t,e,r,o){if(void 0===t)return null;if(!Array.isArray(e.oneOf))throw new c("oneOf must be an array");var i=new u(t,e,r,o),a=new u(t,e,r,o),s=e.oneOf.filter(n.bind(this,t,r,o,function(t){a.importErrors(t)})).length,f=e.oneOf.map(function(t,e){return t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+e+"]"});return 1!==s&&(r.nestedErrors&&i.importErrors(a),i.addError({name:"oneOf",argument:f,message:"is not exactly one from "+f.join(",")})),i},h.properties=function(t,e,r,n){if(void 0!==t&&t instanceof Object){var o=new u(t,e,r,n),i=e.properties||{};for(var a in i){var s=(t||void 0)&&t[a],c=this.validateSchema(s,i[a],r,n.makeChild(i[a],a));c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c)}return o}},h.patternProperties=function(t,e,r,n){if(void 0!==t&&this.types.object(t)){var i=new u(t,e,r,n),a=e.patternProperties||{};for(var s in t){var c=!0;for(var f in a){if(new RegExp(f).test(s)){c=!1;var h=this.validateSchema(t[s],a[f],r,n.makeChild(a[f],s));h.instance!==i.instance[s]&&(i.instance[s]=h.instance),i.importErrors(h)}}c&&o.call(this,t,e,r,n,s,i)}return i}},h.additionalProperties=function(t,e,r,n){if(void 0!==t&&this.types.object(t)){if(e.patternProperties)return null;var i=new u(t,e,r,n);for(var a in t)o.call(this,t,e,r,n,a,i);return i}},h.minProperties=function(t,e,r,n){if(!t||"object"!==(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);return Object.keys(t).length>=e.minProperties||o.addError({name:"minProperties",argument:e.minProperties,message:"does not meet minimum property length of "+e.minProperties}),o},h.maxProperties=function(t,e,r,n){if(!t||"object"!==(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);return Object.keys(t).length<=e.maxProperties||o.addError({name:"maxProperties",argument:e.maxProperties,message:"does not meet maximum property length of "+e.maxProperties}),o},h.items=function(t,e,r,n){if(!Array.isArray(t))return null;var o=this,i=new u(t,e,r,n);return void 0!==t&&e.items?(t.every(function(t,a){var s=Array.isArray(e.items)?e.items[a]||e.additionalItems:e.items;if(void 0===s)return!0;if(s===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(t,s,r,n.makeChild(s,a));return u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u),!0}),i):i},h.minimum=function(t,e,r,n){if("number"!=typeof t)return null;var o=new u(t,e,r,n),i=!0;return i=e.exclusiveMinimum&&e.exclusiveMinimum===!0?t>e.minimum:t>=e.minimum,i||o.addError({name:"minimum",argument:e.minimum,message:"must have a minimum value of "+e.minimum}),o},h.maximum=function(t,e,r,n){if("number"!=typeof t)return null;var o,i=new u(t,e,r,n);return o=e.exclusiveMaximum&&e.exclusiveMaximum===!0?t<e.maximum:t<=e.maximum,o||i.addError({name:"maximum",argument:e.maximum,message:"must have a maximum value of "+e.maximum}),i},h.divisibleBy=function(t,e,r,n){if("number"!=typeof t)return null;if(0==e.divisibleBy)throw new c("divisibleBy cannot be zero");var o=new u(t,e,r,n);return t/e.divisibleBy%1&&o.addError({name:"divisibleBy",argument:e.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(e.divisibleBy)}),o},h.multipleOf=function(t,e,r,n){if("number"!=typeof t)return null;if(0==e.multipleOf)throw new c("multipleOf cannot be zero");var o=new u(t,e,r,n);return t/e.multipleOf%1&&o.addError({name:"multipleOf",argument:e.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(e.multipleOf)}),o},h.required=function(t,e,r,n){var o=new u(t,e,r,n);return void 0===t&&e.required===!0?o.addError({name:"required",message:"is required"}):t&&"object"===(void 0===t?"undefined":a(t))&&Array.isArray(e.required)&&e.required.forEach(function(e){void 0===t[e]&&o.addError({name:"required",argument:e,message:"requires property "+JSON.stringify(e)})}),o},h.pattern=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.match(e.pattern)||o.addError({name:"pattern",argument:e.pattern,message:"does not match pattern "+JSON.stringify(e.pattern)}),o},h.format=function(t,e,r,n){var o=new u(t,e,r,n);return o.disableFormat||s.isFormat(t,e.format,this)||o.addError({name:"format",argument:e.format,message:"does not conform to the "+JSON.stringify(e.format)+" format"}),o},h.minLength=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.length>=e.minLength||o.addError({name:"minLength",argument:e.minLength,message:"does not meet minimum length of "+e.minLength}),o},h.maxLength=function(t,e,r,n){if("string"!=typeof t)return null;var o=new u(t,e,r,n);return t.length<=e.maxLength||o.addError({name:"maxLength",argument:e.maxLength,message:"does not meet maximum length of "+e.maxLength}),o},h.minItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.length>=e.minItems||o.addError({name:"minItems",argument:e.minItems,message:"does not meet minimum length of "+e.minItems}),o},h.maxItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.length<=e.maxItems||o.addError({name:"maxItems",argument:e.maxItems,message:"does not meet maximum length of "+e.maxItems}),o},h.uniqueItems=function(t,e,r,n){function o(t,e,r){for(var n=e+1;n<r.length;n++)if(s.deepCompareStrict(t,r[n]))return!1;return!0}var i=new u(t,e,r,n);return Array.isArray(t)?(t.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},h.uniqueItems=function(t,e,r,n){if(!Array.isArray(t))return null;var o=new u(t,e,r,n);return t.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},h.dependencies=function(t,e,r,n){if(!t||"object"!=(void 0===t?"undefined":a(t)))return null;var o=new u(t,e,r,n);for(var i in e.dependencies)if(void 0!==t[i]){var s=e.dependencies[i],c=n.makeChild(s,i);if("string"==typeof s&&(s=[s]),Array.isArray(s))s.forEach(function(e){void 0===t[e]&&o.addError({name:"dependencies",argument:c.propertyPath,message:"property "+e+" not found, required by "+c.propertyPath})});else{var f=this.validateSchema(t,s,r,c);o.instance!==f.instance&&(o.instance=f.instance),f&&f.errors.length&&(o.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),o.importErrors(f))}}return o},h.enum=function(t,e,r,n){if(!Array.isArray(e.enum))throw new c("enum expects an array",e);if(void 0===t)return null;var o=new u(t,e,r,n);return e.enum.some(s.deepCompareStrict.bind(null,t))||o.addError({name:"enum",argument:e.enum,message:"is not one of enum values: "+e.enum.join(",")}),o},h.not=h.disallow=function(t,e,r,n){var o=this;if(void 0===t)return null;var i=new u(t,e,r,n),a=e.not||e.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(a){if(o.testType(t,e,r,n,a)){var s=a&&a.id&&"<"+a.id+">"||a;i.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),i):null},t.exports=f},function(t,e,r){"use strict";function n(t){var e="string"==typeof t?t:t.$ref;return"string"==typeof e&&e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(3),a=r(6),s=r(0),u=s.ValidatorResult,c=s.SchemaError,f=s.SchemaContext,h=function t(){this.customFormats=Object.create(t.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(l),this.attributes=Object.create(a.validators)};h.prototype.customFormats={},h.prototype.schemas=null,h.prototype.types=null,h.prototype.attributes=null,h.prototype.unresolvedRefs=null,h.prototype.addSchema=function(t,e){if(!t)return null;var r=e||t.id;return this.addSubSchema(r,t),r&&(this.schemas[r]=t),this.schemas[r]},h.prototype.addSubSchema=function(t,e){if(e&&"object"==(void 0===e?"undefined":o(e))){if(e.$ref){var r=i.resolve(t,e.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var n=e.id&&i.resolve(t,e.id),a=n||t;if(n){if(this.schemas[n]){if(!s.deepCompareStrict(this.schemas[n],e))throw new Error("Schema <"+e+"> already exists with different definition");return this.schemas[n]}this.schemas[n]=e;var u=n.replace(/^([^#]*)#$/,"$1");this.schemas[u]=e}return this.addSubSchemaArray(a,e.items instanceof Array?e.items:[e.items]),this.addSubSchemaArray(a,e.extends instanceof Array?e.extends:[e.extends]),this.addSubSchema(a,e.additionalItems),this.addSubSchemaObject(a,e.properties),this.addSubSchema(a,e.additionalProperties),this.addSubSchemaObject(a,e.definitions),this.addSubSchemaObject(a,e.patternProperties),this.addSubSchemaObject(a,e.dependencies),this.addSubSchemaArray(a,e.disallow),this.addSubSchemaArray(a,e.allOf),this.addSubSchemaArray(a,e.anyOf),this.addSubSchemaArray(a,e.oneOf),this.addSubSchema(a,e.not),this.schemas[n]}},h.prototype.addSubSchemaArray=function(t,e){if(e instanceof Array)for(var r=0;r<e.length;r++)this.addSubSchema(t,e[r])},h.prototype.addSubSchemaObject=function(t,e){if(e&&"object"==(void 0===e?"undefined":o(e)))for(var r in e)this.addSubSchema(t,e[r])},h.prototype.setSchemas=function(t){this.schemas=t},h.prototype.getSchema=function(t){return this.schemas[t]},h.prototype.validate=function(t,e,r,n){r||(r={});var o=r.propertyName||"instance",a=i.resolve(r.base||"/",e.id||"");if(n||(n=new f(e,r,o,a,Object.create(this.schemas)),n.schemas[a]||(n.schemas[a]=e)),e){var s=this.validateSchema(t,e,r,n);if(!s)throw new Error("Result undefined");return s}throw new c("no schema specified",e)},h.prototype.validateSchema=function(t,e,r,o){var i=new u(t,e,r,o);if(!e)throw new Error("schema is undefined");if(e.extends)if(e.extends instanceof Array){var h={schema:e,ctx:o};e.extends.forEach(this.schemaTraverser.bind(this,h)),e=h.schema,h.schema=null,h.ctx=null,h=null}else e=s.deepMerge(e,this.superResolve(e.extends,o));var l;if(l=n(e)){var p=this.resolve(e,l,o),d=new f(p.subschema,r,o.propertyPath,p.switchSchema,o.schemas);return this.validateSchema(t,p.subschema,r,d)}var m=r&&r.skipAttributes||[];for(var y in e)if(!a.ignoreProperties[y]&&m.indexOf(y)<0){var v=null,b=this.attributes[y];if(b)v=b.call(this,t,e,r,o);else if(r.allowUnknownAttributes===!1)throw new c("Unsupported attribute: "+y,e);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var g=r.rewrite.call(this,t,e,r,o);i.instance=g}return i},h.prototype.schemaTraverser=function(t,e){t.schema=s.deepMerge(t.schema,this.superResolve(e,t.ctx))},h.prototype.superResolve=function(t,e){var r;return(r=n(t))?this.resolve(t,r,e).subschema:t},h.prototype.resolve=function(t,e,r){if(e=r.resolve(e),r.schemas[e])return{subschema:r.schemas[e],switchSchema:e};var n=i.parse(e),o=n&&n.hash,a=o&&o.length&&e.substr(0,e.length-o.length);if(!a||!r.schemas[a])throw new c("no such schema <"+e+">",t);var u=s.objectGetPath(r.schemas[a],o.substr(1));if(void 0===u)throw new c("no such schema "+o+" located in <"+a+">",t);return{subschema:u,switchSchema:e}},h.prototype.testType=function(t,e,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,t);if(i&&"object"==(void 0===i?"undefined":o(i))){var a=this.validateSchema(t,i,r,n);return void 0===a||!(a&&a.errors.length)}return!0};var l=h.prototype.types={};l.string=function(t){return"string"==typeof t},l.number=function(t){return"number"==typeof t&&isFinite(t)},l.integer=function(t){return"number"==typeof t&&t%1==0},l.boolean=function(t){return"boolean"==typeof t},l.array=function(t){return t instanceof Array},l.null=function(t){return null===t},l.date=function(t){return t instanceof Date},l.any=function(t){return!0},l.object=function(t){return t&&"object"===(void 0===t?"undefined":o(t))&&!(t instanceof Array)&&!(t instanceof Date)},t.exports=h},function(t,e,r){"use strict";(function(t,n){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){function s(t){throw new RangeError(M[t])}function u(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function c(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(q,"."),n+u(t.split("."),e).join(".")}function f(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function h(t){return u(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:j}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,r){var n=0;for(t=r?Z(t/C):t>>1,t+=Z(t/e);t>z*E>>1;n+=j)t=Z(t/z);return Z(n+(z+1)*t/(t+P))}function m(t){var e,r,n,o,i,a,u,c,f,p,m=[],y=t.length,v=0,b=$,g=k;for(r=t.lastIndexOf(F),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,a=1,u=j;o>=y&&s("invalid-input"),c=l(t.charCodeAt(o++)),(c>=j||c>Z((O-v)/a))&&s("overflow"),v+=c*a,f=u<=g?x:u>=g+E?E:u-g,!(c<f);u+=j)p=j-f,a>Z(O/p)&&s("overflow"),a*=p;e=m.length+1,g=d(v-i,e,0==i),Z(v/e)>O-b&&s("overflow"),b+=Z(v/e),v%=e,m.splice(v++,0,b)}return h(m)}function y(t){var e,r,n,o,i,a,u,c,h,l,m,y,v,b,g,S=[];for(t=f(t),y=t.length,e=$,r=0,i=k,a=0;a<y;++a)(m=t[a])<128&&S.push(N(m));for(n=o=S.length,o&&S.push(F);n<y;){for(u=O,a=0;a<y;++a)(m=t[a])>=e&&m<u&&(u=m);for(v=n+1,u-e>Z((O-r)/v)&&s("overflow"),r+=(u-e)*v,e=u,a=0;a<y;++a)if(m=t[a],m<e&&++r>O&&s("overflow"),m==e){for(c=r,h=j;l=h<=i?x:h>=i+E?E:h-i,!(c<l);h+=j)g=c-l,b=j-l,S.push(N(p(l+g%b,0))),c=Z(g/b);S.push(N(p(c,0))),i=d(r,v,n==o),r=0,++n}++r,++e}return S.join("")}function v(t){return c(t,function(t){return I.test(t)?m(t.slice(4).toLowerCase()):t})}function b(t){return c(t,function(t){return R.test(t)?"xn--"+y(t):t})}var g="object"==i(e)&&e&&!e.nodeType&&e,S="object"==i(t)&&t&&!t.nodeType&&t,w="object"==(void 0===n?"undefined":i(n))&&n;w.global!==w&&w.window!==w&&w.self!==w||(a=w);var _,A,O=2147483647,j=36,x=1,E=26,P=38,C=700,k=72,$=128,F="-",I=/^xn--/,R=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=j-x,Z=Math.floor,N=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:f,encode:h},decode:m,encode:y,toASCII:b,toUnicode:v},"object"==i(r(5))&&r(5))void 0!==(o=function(){return _}.call(e,r,e,t))&&(t.exports=o);else if(g&&S)if(t.exports==g)S.exports=_;else for(A in _)_.hasOwnProperty(A)&&(g[A]=_[A]);else a.punycode=_}(void 0)}).call(e,r(13)(t),r(4))},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var f,h,l,p,d=t[c].replace(/\+/g,"%20"),m=d.indexOf(r);m>=0?(f=d.substr(0,m),h=d.substr(m+1)):(f=d,h=""),l=decodeURIComponent(f),p=decodeURIComponent(h),n(a,l)?o(a[l])?a[l].push(p):a[l]=[a[l],p]:a[l]=p}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){switch(void 0===t?"undefined":o(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,u){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===(void 0===t?"undefined":o(t))?n(s(t),function(o){var s=encodeURIComponent(i(o))+r;return a(t[o])?n(t[o],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[o]))}).join(e):u?encodeURIComponent(i(u))+r+encodeURIComponent(i(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";e.decode=e.parse=r(9),e.encode=e.stringify=r(10)},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";(function(e){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function i(){this.__data__=dt?dt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(dt){var r=e[t];return r===J?void 0:r}return ut.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return dt?void 0!==e[t]:ut.call(e,t)}function c(t,e){return this.__data__[t]=dt&&void 0===e?J:e,this}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(){this.__data__=[]}function l(t){var e=this.__data__,r=_(e,t);return!(r<0)&&(r==e.length-1?e.pop():lt.call(e,r,1),!0)}function p(t){var e=this.__data__,r=_(e,t);return r<0?void 0:e[r][1]}function d(t){return _(this.__data__,t)>-1}function m(t,e){var r=this.__data__,n=_(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function y(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(pt||f),string:new o}}function b(t){return E(this,t).delete(t)}function g(t){return E(this,t).get(t)}function S(t){return E(this,t).has(t)}function w(t,e){return E(this,t).set(t,e),this}function _(t,e){for(var r=t.length;r--;)if(q(t[r][0],e))return r;return-1}function A(t,e){e=C(e,t)?[e]:x(e);for(var r=0,n=e.length;null!=t&&r<n;)t=t[F(e[r++])];return r&&r==n?t:void 0}function O(t){return!(!z(t)||$(t))&&(M(t)||n(t)?ft:Q).test(I(t))}function j(t){if("string"==typeof t)return t;if(N(t))return yt?yt.call(t):"";var e=t+"";return"0"==e&&1/t==-V?"-0":e}function x(t){return bt(t)?t:vt(t)}function E(t,e){var r=t.__data__;return k(e)?r["string"==typeof e?"string":"hash"]:r.map}function P(t,e){var n=r(t,e);return O(n)?n:void 0}function C(t,e){if(bt(t))return!1;var r=void 0===t?"undefined":W(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!N(t))||(K.test(t)||!H.test(t)||null!=e&&t in Object(e))}function k(t){var e=void 0===t?"undefined":W(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function $(t){return!!at&&at in t}function F(t){if("string"==typeof t||N(t))return t;var e=t+"";return"0"==e&&1/t==-V?"-0":e}function I(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(L);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(R.Cache||y),r}function q(t,e){return t===e||t!==t&&e!==e}function M(t){var e=z(t)?ct.call(t):"";return e==B||e==G}function z(t){var e=void 0===t?"undefined":W(t);return!!t&&("object"==e||"function"==e)}function Z(t){return!!t&&"object"==(void 0===t?"undefined":W(t))}function N(t){return"symbol"==(void 0===t?"undefined":W(t))||Z(t)&&ct.call(t)==D}function T(t){return null==t?"":j(t)}function U(t,e,r){var n=null==t?void 0:A(t,e);return void 0===n?r:n}var W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L="Expected a function",J="__lodash_hash_undefined__",V=1/0,B="[object Function]",G="[object GeneratorFunction]",D="[object Symbol]",H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,X=/^\./,Q=/^\[object .+?Constructor\]$/,Y="object"==(void 0===e?"undefined":W(e))&&e&&e.Object===Object&&e,tt="object"==("undefined"==typeof self?"undefined":W(self))&&self&&self.Object===Object&&self,et=Y||tt||Function("return this")(),rt=Array.prototype,nt=Function.prototype,ot=Object.prototype,it=et["__core-js_shared__"],at=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),st=nt.toString,ut=ot.hasOwnProperty,ct=ot.toString,ft=RegExp("^"+st.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=et.Symbol,lt=rt.splice,pt=P(et,"Map"),dt=P(Object,"create"),mt=ht?ht.prototype:void 0,yt=mt?mt.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=h,f.prototype.delete=l,f.prototype.get=p,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=S,y.prototype.set=w;var vt=R(function(t){t=T(t);var e=[];return X.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,r,n,o){e.push(n?o.replace(/\\(\\)?/g,"$1"):r||t)}),e});R.Cache=y;var bt=Array.isArray;t.exports=U}).call(e,r(4))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(2).Validator,a=r(1).WAMPResultSchema,s=r(1).WAMPCallSchema,u=new i,c=function(){function t(){n(this,t),this.registeredEnpoints={}}return o(t,[{key:"upgradeToWAMP",value:function(t){var e=this;return t.on("raw",function(r){try{r=JSON.parse(r)}catch(t){return}u.validate(r,s).valid&&r.type===s.id&&e.processWAMPRequest(r,t)}),t}},{key:"processWAMPRequest",value:function(t,e){if(!this.registeredEnpoints[t.procedure]||"function"!=typeof t.procedure)return this.reply(e,t,"procedure not registered on WAMPServer",null);procedure(t.data,this.reply.bind(e,t))}},{key:"reply",value:function(t,e,r,n){t.send(JSON.stringify({success:!r,data:r?r:n,type:a.id,procedure:e.procedure,signature:e.signature}))}},{key:"addEndpoint",value:function(t){this.registeredEnpoints=Object.assign(this.registeredEnpoints,t)}},{key:"reassignEndpoints",value:function(t){this.registeredEnpoints=t}}]),t}();t.exports=c},function(t,e,r){"use strict";(function(e){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function i(){this.__data__=bt?bt(null):{}}function a(t){return this.has(t)&&delete this.__data__[t]}function s(t){var e=this.__data__;if(bt){var r=e[t];return r===B?void 0:r}return lt.call(e,t)?e[t]:void 0}function u(t){var e=this.__data__;return bt?void 0!==e[t]:lt.call(e,t)}function c(t,e){return this.__data__[t]=bt&&void 0===e?B:e,this}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(){this.__data__=[]}function l(t){var e=this.__data__,r=A(e,t);return!(r<0)&&(r==e.length-1?e.pop():yt.call(e,r,1),!0)}function p(t){var e=this.__data__,r=A(e,t);return r<0?void 0:e[r][1]}function d(t){return A(this.__data__,t)>-1}function m(t,e){var r=this.__data__,n=A(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function y(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function v(){this.__data__={hash:new o,map:new(vt||f),string:new o}}function b(t){return P(this,t).delete(t)}function g(t){return P(this,t).get(t)}function S(t){return P(this,t).has(t)}function w(t,e){return P(this,t).set(t,e),this}function _(t,e,r){var n=t[e];lt.call(t,e)&&z(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function A(t,e){for(var r=t.length;r--;)if(z(t[r][0],e))return r;return-1}function O(t){return!(!N(t)||I(t))&&(Z(t)||n(t)?dt:et).test(q(t))}function j(t,e,r,n){if(!N(t))return t;e=$(e,t)?[e]:E(e);for(var o=-1,i=e.length,a=i-1,s=t;null!=s&&++o<i;){var u=R(e[o]),c=r;if(o!=a){var f=s[u];c=n?n(f,u,s):void 0,void 0===c&&(c=N(f)?f:k(e[o+1])?[]:{})}_(s,u,c),s=s[u]}return t}function x(t){if("string"==typeof t)return t;if(U(t))return St?St.call(t):"";var e=t+"";return"0"==e&&1/t==-G?"-0":e}function E(t){return _t(t)?t:wt(t)}function P(t,e){var r=t.__data__;return F(e)?r["string"==typeof e?"string":"hash"]:r.map}function C(t,e){var n=r(t,e);return O(n)?n:void 0}function k(t,e){return!!(e=null==e?D:e)&&("number"==typeof t||rt.test(t))&&t>-1&&t%1==0&&t<e}function $(t,e){if(_t(t))return!1;var r=void 0===t?"undefined":J(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!U(t))||(Y.test(t)||!Q.test(t)||null!=e&&t in Object(e))}function F(t){var e=void 0===t?"undefined":J(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function I(t){return!!ft&&ft in t}function R(t){if("string"==typeof t||U(t))return t;var e=t+"";return"0"==e&&1/t==-G?"-0":e}function q(t){if(null!=t){try{return ht.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function M(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(V);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(M.Cache||y),r}function z(t,e){return t===e||t!==t&&e!==e}function Z(t){var e=N(t)?pt.call(t):"";return e==H||e==K}function N(t){var e=void 0===t?"undefined":J(t);return!!t&&("object"==e||"function"==e)}function T(t){return!!t&&"object"==(void 0===t?"undefined":J(t))}function U(t){return"symbol"==(void 0===t?"undefined":J(t))||T(t)&&pt.call(t)==X}function W(t){return null==t?"":x(t)}function L(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:j(t,e,r,n)}var J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V="Expected a function",B="__lodash_hash_undefined__",G=1/0,D=9007199254740991,H="[object Function]",K="[object GeneratorFunction]",X="[object Symbol]",Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,tt=/^\./,et=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,nt="object"==(void 0===e?"undefined":J(e))&&e&&e.Object===Object&&e,ot="object"==("undefined"==typeof self?"undefined":J(self))&&self&&self.Object===Object&&self,it=nt||ot||Function("return this")(),at=Array.prototype,st=Function.prototype,ut=Object.prototype,ct=it["__core-js_shared__"],ft=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ht=st.toString,lt=ut.hasOwnProperty,pt=ut.toString,dt=RegExp("^"+ht.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=it.Symbol,yt=at.splice,vt=C(it,"Map"),bt=C(Object,"create"),gt=mt?mt.prototype:void 0,St=gt?gt.toString:void 0;o.prototype.clear=i,o.prototype.delete=a,o.prototype.get=s,o.prototype.has=u,o.prototype.set=c,f.prototype.clear=h,f.prototype.delete=l,f.prototype.get=p,f.prototype.has=d,f.prototype.set=m,y.prototype.clear=v,y.prototype.delete=b,y.prototype.get=g,y.prototype.has=S,y.prototype.set=w;var wt=M(function(t){t=W(t);var e=[];return tt.test(t)&&e.push(""),t.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(t,r,n,o){e.push(n?o.replace(/\\(\\)?/g,"$1"):r||t)}),e});M.Cache=y;var _t=Array.isArray;t.exports=L}).call(e,r(4))},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(2).Validator,u=r(16),c=r(14),f=r(15),h=r(1).ConcurrentWAMPResultSchema,l=r(1).WAMPCallSchema,p=new s,d=function(t){function e(t,r){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.worker=t,i.RPCCalls={},i.worker.on("masterMessage",function(t){if(p.validate(t,h).valid){var e=r[t.socketId];i.checkCall(e,t)&&(i.reply(e,t,t.err,t.data),i.deleteCall(e,t))}}),i}return i(e,t),a(e,[{key:"processWAMPRequest",value:function(t,e){if(p.validate(t,l).valid){if(Object.keys(this.registeredEnpoints).indexOf(t.procedure)===-1)return this.reply(e,t,"procedure not registered on ConcurrentWAMPServer",null);t.socketId=e.id,t.workerId=this.worker.id,this.worker.sendToMaster(t),this.saveCall(e,t)}}},{key:"onSocketDisconnect",value:function(t){return delete this.RPCCalls[t.id]}},{key:"checkCall",value:function(t,e){return c(this.RPCCalls,t.id+"."+e.procedure+"."+e.signature,!1)}},{key:"saveCall",value:function(t,e){return u(this.RPCCalls,t.id+"."+e.procedure+"."+e.signature,!0,Object)}},{key:"deleteCall",value:function(t,e){return delete this.RPCCalls[t.id][e.procedure][e.signature]}}]),e}(f);t.exports=d}])});